(()=>{var e={};e.id=2731,e.ids=[636,2731,3220],e.modules={237:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},468:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o,l:()=>i});var n=r(8732),s=r(2015);let i=(0,s.createContext)(),o=({children:e})=>{let[t,r]=(0,s.useState)("Ma Soci\xe9t\xe9 Ferroviaire"),[o,a]=(0,s.useState)("Le transport ferroviaire simplifi\xe9"),[l,c]=(0,s.useState)("Description de la soci\xe9t\xe9 ferroviaire..."),[u,d]=(0,s.useState)("#007bff"),[f,p]=(0,s.useState)("#6c757d"),[h,g]=(0,s.useState)("#28a745"),[m,y]=(0,s.useState)("Train Schedule Management"),[S,x]=(0,s.useState)("/images/logo-ter-mobigo.svg"),[v,P]=(0,s.useState)("/favicon.ico"),[b,j]=(0,s.useState)("Inter"),[_,M]=(0,s.useState)("rounded"),[A,E]=(0,s.useState)("default"),[k,T]=(0,s.useState)("\xa9 2024 Ma Soci\xe9t\xe9 Ferroviaire"),[w,I]=(0,s.useState)([]),[O,R]=(0,s.useState)(""),[C,q]=(0,s.useState)(2);return(0,s.useEffect)(()=>{!async function(){try{let e=await fetch("/api/entreprise");if(e.ok){let t=await e.json(),n=t.entrepriseSettings||{};r(n.company_name||"Ma Soci\xe9t\xe9 Ferroviaire"),a(n.company_slogan||"Le transport ferroviaire simplifi\xe9"),c(n.company_description||"Description de la soci\xe9t\xe9 ferroviaire..."),d(n.primary_color||"#007bff"),p(n.secondary_color||"#6c757d"),g(n.accent_color||"#28a745"),y(n.app_name||"Train Schedule Management"),x(n.logo_url||"/images/logo-ter-mobigo.svg"),P(n.favicon_url||"/favicon.ico"),j(n.font_family||"Inter"),M(n.button_style||"rounded"),E(n.header_style||"default"),T(n.footer_content||"\xa9 2024 Ma Soci\xe9t\xe9 Ferroviaire"),I(t.footerRegions||[]),R(n.custom_css||""),q(void 0!==n.served_stations_lines?n.served_stations_lines:2)}}catch(e){console.error("Failed to fetch settings:",e)}}()},[]),(0,s.useEffect)(()=>{let e=document.documentElement;e.style.setProperty("--primary-color",u),e.style.setProperty("--secondary-color",f),e.style.setProperty("--accent-color",h),e.style.setProperty("--font-family",b);let t=document.getElementById("custom-styles");t||((t=document.createElement("style")).id="custom-styles",document.head.appendChild(t)),t.textContent=O},[u,f,h,b,O]),(0,n.jsx)(i.Provider,{value:{companyName:t,setCompanyName:r,companySlogan:o,setCompanySlogan:a,companyDescription:l,setCompanyDescription:c,primaryColor:u,setPrimaryColor:d,secondaryColor:f,setSecondaryColor:p,accentColor:h,setAccentColor:g,appName:m,setAppName:y,logoUrl:S,setLogoUrl:x,faviconUrl:v,setFaviconUrl:P,fontFamily:b,setFontFamily:j,buttonStyle:_,setButtonStyle:M,headerStyle:A,setHeaderStyle:E,footerContent:k,setFooterContent:T,footerRegions:w,setFooterRegions:I,customCss:O,setCustomCss:R,servedStationsLines:C,setServedStationsLines:q},children:e})}},734:(e,t,r)=>{"use strict";r.d(t,{O:()=>o,c:()=>i});var n=r(8732),s=r(2015);let i=(0,s.createContext)();function o({children:e}){let[t,r]=(0,s.useState)(!1),[o,a]=(0,s.useState)(null),[l,c]=(0,s.useState)(null),u=async(e,t)=>{try{let n=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!n.ok)return!1;let s=await n.json();return r(!0),a(s.user.role),c(s.user),!0}catch(e){return console.error("Login error:",e),!1}},d=async(e,t,n="",s="",i="")=>{try{let o=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,name:n,email:s,phone:i})});if(!o.ok)return!1;return await o.json(),r(!0),a("client"),c({username:e,role:"client",name:n,email:s,phone:i}),!0}catch(e){return console.error("Registration error:",e),!1}};return(0,n.jsx)(i.Provider,{value:{isAuthenticated:t,role:o,user:l,setUser:c,login:u,logout:()=>{r(!1),a(null),c(null)},register:d},children:e})}},1413:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2015:e=>{"use strict";e.exports=require("react")},2326:e=>{"use strict";e.exports=require("react-dom")},2768:()=>{},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},5020:(e,t,r)=>{"use strict";r.d(t,{N:()=>a,W:()=>o});var n=r(8732),s=r(2015);let i=(0,s.createContext)();function o({children:e}){let[t,r]=(0,s.useState)({});return(0,n.jsx)(i.Provider,{value:{trackAssignments:t,updateTrackAssignment:(e,t,n)=>{r(r=>{let s={...r,[e]:{...r[e]||{},[t]:n}};return localStorage.setItem("trackAssignments",JSON.stringify(s)),s})},removeTrackAssignment:(e,t)=>{r(r=>{let n={...r};return n[e]&&(delete n[e][t],0===Object.keys(n[e]).length&&delete n[e]),localStorage.setItem("trackAssignments",JSON.stringify(n)),n})},clearTrackAssignments:()=>{r({}),localStorage.removeItem("trackAssignments")}},children:e})}function a(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useTrackAssignments must be used within a TrackAssignmentProvider");return e}},5124:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{NEXT_REQUEST_META:function(){return r},addRequestMeta:function(){return i},getRequestMeta:function(){return n},removeRequestMeta:function(){return o},setRequestMeta:function(){return s}});let r=Symbol.for("NextInternalRequestMeta");function n(e,t){let n=e[r]||{};return"string"==typeof t?n[t]:n}function s(e,t){return e[r]=t,t}function i(e,t,r){let i=n(e);return i[t]=r,s(e,i)}function o(e,t){let r=n(e);return delete r[t],s(e,r)}},5379:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return u}});let n=r(5423),s=r(8732),i=n._(r(2015)),o=n._(r(1145)),a={400:"Bad Request",404:"This page could not be found",405:"Method Not Allowed",500:"Internal Server Error"};function l(e){let t,{req:n,res:s,err:i}=e,o=s&&s.statusCode?s.statusCode:i?i.statusCode:404;if(n){let{getRequestMeta:e}=r(5124),s=e(n,"initURL");s&&(t=new URL(s).hostname)}return{statusCode:o,hostname:t}}let c={error:{fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},desc:{lineHeight:"48px"},h1:{display:"inline-block",margin:"0 20px 0 0",paddingRight:23,fontSize:24,fontWeight:500,verticalAlign:"top"},h2:{fontSize:14,fontWeight:400,lineHeight:"28px"},wrap:{display:"inline-block"}};class u extends i.default.Component{render(){let{statusCode:e,withDarkMode:t=!0}=this.props,r=this.props.title||a[e]||"An unexpected error has occurred";return(0,s.jsxs)("div",{style:c.error,children:[(0,s.jsx)(o.default,{children:(0,s.jsx)("title",{children:e?e+": "+r:"Application error: a client-side exception has occurred"})}),(0,s.jsxs)("div",{style:c.desc,children:[(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}"+(t?"@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}":"")}}),e?(0,s.jsx)("h1",{className:"next-error-h1",style:c.h1,children:e}):null,(0,s.jsx)("div",{style:c.wrap,children:(0,s.jsxs)("h2",{style:c.h2,children:[this.props.title||e?r:(0,s.jsxs)(s.Fragment,{children:["Application error: a client-side exception has occurred"," ",!!this.props.hostname&&(0,s.jsxs)(s.Fragment,{children:["while loading ",this.props.hostname]})," ","(see the browser console for more information)"]}),"."]})})]})]})}}u.displayName="ErrorPage",u.getInitialProps=l,u.origGetInitialProps=l,("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},6840:()=>{},7063:(e,t,r)=>{"use strict";r.r(t),r.d(t,{config:()=>p,default:()=>c,getServerSideProps:()=>f,getStaticPaths:()=>d,getStaticProps:()=>u,reportWebVitals:()=>h,routeModule:()=>v,unstable_getServerProps:()=>S,unstable_getServerSideProps:()=>x,unstable_getStaticParams:()=>y,unstable_getStaticPaths:()=>m,unstable_getStaticProps:()=>g});var n=r(3885),s=r(237),i=r(1413),o=r(9674),a=r(7522),l=r(5379);let c=(0,i.M)(l,"default"),u=(0,i.M)(l,"getStaticProps"),d=(0,i.M)(l,"getStaticPaths"),f=(0,i.M)(l,"getServerSideProps"),p=(0,i.M)(l,"config"),h=(0,i.M)(l,"reportWebVitals"),g=(0,i.M)(l,"unstable_getStaticProps"),m=(0,i.M)(l,"unstable_getStaticPaths"),y=(0,i.M)(l,"unstable_getStaticParams"),S=(0,i.M)(l,"unstable_getServerProps"),x=(0,i.M)(l,"unstable_getServerSideProps"),v=new n.PagesRouteModule({definition:{kind:s.A.PAGES,page:"/_error",pathname:"/_error",bundlePath:"",filename:""},components:{App:a.default,Document:o.default},userland:l})},7522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(8732);r(3908),r(2768),r(6840),r(2015);var s=r(9788),i=r.n(s),o=r(4233),a=r(468),l=r(734),c=r(5020);function u({children:e}){return e}function d({Component:e,pageProps:t}){return(0,o.useRouter)().pathname.startsWith("/afficheurs"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(i(),{children:[(0,n.jsx)("title",{children:"TER Ferrovia Bourgogne - Franche-Comt\xe9"}),(0,n.jsx)("meta",{name:"description",content:"Gestion des horaires et services TER"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(l.O,{children:(0,n.jsx)(a.Z,{children:(0,n.jsx)(c.W,{children:(0,n.jsx)("div",{className:"",children:(0,n.jsx)(u,{children:(0,n.jsx)(e,{...t})})})})})})]})}},7910:e=>{"use strict";e.exports=require("stream")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},9021:e=>{"use strict";e.exports=require("fs")},9674:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(8732),s=r(2341);function i(){return(0,n.jsxs)(s.Html,{children:[(0,n.jsx)(s.Head,{children:(0,n.jsx)("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"})}),(0,n.jsxs)("body",{children:[(0,n.jsx)(s.Main,{}),(0,n.jsx)(s.NextScript,{})]})]})}}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[5126,491,2341],()=>r(7063));module.exports=n})();