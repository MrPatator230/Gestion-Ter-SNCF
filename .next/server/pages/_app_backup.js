(()=>{var e={};e.id=2729,e.ids=[636,2729,3220],e.modules={237:(e,t)=>{"use strict";Object.defineProperty(t,"A",{enumerable:!0,get:function(){return r}});var r=function(e){return e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE",e.IMAGE="IMAGE",e}({})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},468:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a,l:()=>n});var s=r(8732),i=r(2015);let n=(0,i.createContext)(),a=({children:e})=>{let[t,r]=(0,i.useState)("Ma Soci\xe9t\xe9 Ferroviaire"),[a,o]=(0,i.useState)("Le transport ferroviaire simplifi\xe9"),[c,u]=(0,i.useState)("Description de la soci\xe9t\xe9 ferroviaire..."),[l,d]=(0,i.useState)("#007bff"),[p,f]=(0,i.useState)("#6c757d"),[m,g]=(0,i.useState)("#28a745"),[S,h]=(0,i.useState)("Train Schedule Management"),[v,P]=(0,i.useState)("/images/logo-ter-mobigo.svg"),[y,x]=(0,i.useState)("/favicon.ico"),[_,j]=(0,i.useState)("Inter"),[b,A]=(0,i.useState)("rounded"),[M,E]=(0,i.useState)("default"),[k,T]=(0,i.useState)("\xa9 2024 Ma Soci\xe9t\xe9 Ferroviaire"),[w,O]=(0,i.useState)([]),[I,C]=(0,i.useState)(""),[G,q]=(0,i.useState)(2);return(0,i.useEffect)(()=>{!async function(){try{let e=await fetch("/api/entreprise");if(e.ok){let t=await e.json(),s=t.entrepriseSettings||{};r(s.company_name||"Ma Soci\xe9t\xe9 Ferroviaire"),o(s.company_slogan||"Le transport ferroviaire simplifi\xe9"),u(s.company_description||"Description de la soci\xe9t\xe9 ferroviaire..."),d(s.primary_color||"#007bff"),f(s.secondary_color||"#6c757d"),g(s.accent_color||"#28a745"),h(s.app_name||"Train Schedule Management"),P(s.logo_url||"/images/logo-ter-mobigo.svg"),x(s.favicon_url||"/favicon.ico"),j(s.font_family||"Inter"),A(s.button_style||"rounded"),E(s.header_style||"default"),T(s.footer_content||"\xa9 2024 Ma Soci\xe9t\xe9 Ferroviaire"),O(t.footerRegions||[]),C(s.custom_css||""),q(void 0!==s.served_stations_lines?s.served_stations_lines:2)}}catch(e){console.error("Failed to fetch settings:",e)}}()},[]),(0,i.useEffect)(()=>{let e=document.documentElement;e.style.setProperty("--primary-color",l),e.style.setProperty("--secondary-color",p),e.style.setProperty("--accent-color",m),e.style.setProperty("--font-family",_);let t=document.getElementById("custom-styles");t||((t=document.createElement("style")).id="custom-styles",document.head.appendChild(t)),t.textContent=I},[l,p,m,_,I]),(0,s.jsx)(n.Provider,{value:{companyName:t,setCompanyName:r,companySlogan:a,setCompanySlogan:o,companyDescription:c,setCompanyDescription:u,primaryColor:l,setPrimaryColor:d,secondaryColor:p,setSecondaryColor:f,accentColor:m,setAccentColor:g,appName:S,setAppName:h,logoUrl:v,setLogoUrl:P,faviconUrl:y,setFaviconUrl:x,fontFamily:_,setFontFamily:j,buttonStyle:b,setButtonStyle:A,headerStyle:M,setHeaderStyle:E,footerContent:k,setFooterContent:T,footerRegions:w,setFooterRegions:O,customCss:I,setCustomCss:C,servedStationsLines:G,setServedStationsLines:q},children:e})}},734:(e,t,r)=>{"use strict";r.d(t,{O:()=>a,c:()=>n});var s=r(8732),i=r(2015);let n=(0,i.createContext)();function a({children:e}){let[t,r]=(0,i.useState)(!1),[a,o]=(0,i.useState)(null),[c,u]=(0,i.useState)(null),l=async(e,t)=>{try{let s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!s.ok)return!1;let i=await s.json();return r(!0),o(i.user.role),u(i.user),!0}catch(e){return console.error("Login error:",e),!1}},d=async(e,t,s="",i="",n="")=>{try{let a=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,name:s,email:i,phone:n})});if(!a.ok)return!1;return await a.json(),r(!0),o("client"),u({username:e,role:"client",name:s,email:i,phone:n}),!0}catch(e){return console.error("Registration error:",e),!1}};return(0,s.jsx)(n.Provider,{value:{isAuthenticated:t,role:a,user:c,setUser:u,login:l,logout:()=>{r(!1),o(null),u(null)},register:d},children:e})}},1413:(e,t)=>{"use strict";Object.defineProperty(t,"M",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},2015:e=>{"use strict";e.exports=require("react")},2326:e=>{"use strict";e.exports=require("react-dom")},2763:()=>{},2768:()=>{},3873:e=>{"use strict";e.exports=require("path")},3923:(e,t,r)=>{"use strict";r.r(t),r.d(t,{config:()=>f,default:()=>u,getServerSideProps:()=>p,getStaticPaths:()=>d,getStaticProps:()=>l,reportWebVitals:()=>m,routeModule:()=>y,unstable_getServerProps:()=>v,unstable_getServerSideProps:()=>P,unstable_getStaticParams:()=>h,unstable_getStaticPaths:()=>S,unstable_getStaticProps:()=>g});var s=r(3885),i=r(237),n=r(1413),a=r(9674),o=r(7522),c=r(2763);let u=(0,n.M)(c,"default"),l=(0,n.M)(c,"getStaticProps"),d=(0,n.M)(c,"getStaticPaths"),p=(0,n.M)(c,"getServerSideProps"),f=(0,n.M)(c,"config"),m=(0,n.M)(c,"reportWebVitals"),g=(0,n.M)(c,"unstable_getStaticProps"),S=(0,n.M)(c,"unstable_getStaticPaths"),h=(0,n.M)(c,"unstable_getStaticParams"),v=(0,n.M)(c,"unstable_getServerProps"),P=(0,n.M)(c,"unstable_getServerSideProps"),y=new s.PagesRouteModule({definition:{kind:i.A.PAGES,page:"/_app_backup",pathname:"/_app_backup",bundlePath:"",filename:""},components:{App:o.default,Document:a.default},userland:c})},4075:e=>{"use strict";e.exports=require("zlib")},5020:(e,t,r)=>{"use strict";r.d(t,{N:()=>o,W:()=>a});var s=r(8732),i=r(2015);let n=(0,i.createContext)();function a({children:e}){let[t,r]=(0,i.useState)({});return(0,s.jsx)(n.Provider,{value:{trackAssignments:t,updateTrackAssignment:(e,t,s)=>{r(r=>{let i={...r,[e]:{...r[e]||{},[t]:s}};return localStorage.setItem("trackAssignments",JSON.stringify(i)),i})},removeTrackAssignment:(e,t)=>{r(r=>{let s={...r};return s[e]&&(delete s[e][t],0===Object.keys(s[e]).length&&delete s[e]),localStorage.setItem("trackAssignments",JSON.stringify(s)),s})},clearTrackAssignments:()=>{r({}),localStorage.removeItem("trackAssignments")}},children:e})}function o(){let e=(0,i.useContext)(n);if(void 0===e)throw Error("useTrackAssignments must be used within a TrackAssignmentProvider");return e}},6840:()=>{},7522:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var s=r(8732);r(3908),r(2768),r(6840),r(2015);var i=r(9788),n=r.n(i),a=r(4233),o=r(468),c=r(734),u=r(5020);function l({children:e}){return e}function d({Component:e,pageProps:t}){return(0,a.useRouter)().pathname.startsWith("/afficheurs"),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n(),{children:[(0,s.jsx)("title",{children:"TER Ferrovia Bourgogne - Franche-Comt\xe9"}),(0,s.jsx)("meta",{name:"description",content:"Gestion des horaires et services TER"}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,s.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,s.jsx)(c.O,{children:(0,s.jsx)(o.Z,{children:(0,s.jsx)(u.W,{children:(0,s.jsx)("div",{className:"",children:(0,s.jsx)(l,{children:(0,s.jsx)(e,{...t})})})})})})]})}},7910:e=>{"use strict";e.exports=require("stream")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},9021:e=>{"use strict";e.exports=require("fs")},9674:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(8732),i=r(2341);function n(){return(0,s.jsxs)(i.Html,{children:[(0,s.jsx)(i.Head,{children:(0,s.jsx)("link",{href:"https://fonts.googleapis.com/icon?family=Material+Icons",rel:"stylesheet"})}),(0,s.jsxs)("body",{children:[(0,s.jsx)(i.Main,{}),(0,s.jsx)(i.NextScript,{})]})]})}}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[5126,491,2341],()=>r(3923));module.exports=s})();