(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1054],{102:e=>{e.exports={container:"AflQuaiArrivee_container__6fxK4",header:"AflQuaiArrivee_header__B_ADc",icon:"AflQuaiArrivee_icon__8qfUm",title:"AflQuaiArrivee_title__4cCM2",main:"AflQuaiArrivee_main__pePNw",infoBox:"AflQuaiArrivee_infoBox__gRFP0",origin:"AflQuaiArrivee_origin__RVLN4",trainNumber:"AflQuaiArrivee_trainNumber__ySidn",arrivalTimeLabel:"AflQuaiArrivee_arrivalTimeLabel__hpbJy",arrivalTime:"AflQuaiArrivee_arrivalTime__z6QKL",platformBox:"AflQuaiArrivee_platformBox__gl5CM",platformLabel:"AflQuaiArrivee_platformLabel__1RHae",platformNumber:"AflQuaiArrivee_platformNumber___CEuP",error:"AflQuaiArrivee_error__QipB_",loading:"AflQuaiArrivee_loading__EmQt2",noSchedule:"AflQuaiArrivee_noSchedule__nqH9w"}},4892:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/afficheurs/afl/quais/arrivees",function(){return r(9297)}])},9297:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>c});var i=r(7876),l=r(4232),t=r(9099),s=r(102),n=r.n(s);function c(){let{gare:e,quai:a}=(0,t.useRouter)().query,[r,s]=(0,l.useState)(null),[c,o]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{!async function(){if(e&&a){o(!0);try{let r=await fetch("/api/schedules/by-station?station=".concat(e));if(!r.ok)throw Error("Failed to fetch schedules");let i=(await r.json()).filter(r=>{if(!r.arrivalTime||!r.trackAssignments||!r.trackAssignments[e]||r.trackAssignments[e]!==a)return!1;let i=(r.servedStations||[]).map(e=>"object"==typeof e?e.name:e);return r.arrivalStation===e||i.includes(e)});if(i.length>0){let e=new Date,a=null,r=1/0;i.forEach(i=>{let[l,t]=i.arrivalTime.split(":").map(Number),s=new Date;s.setHours(l,t,0,0);let n=s-e;n>=0&&n<r&&(r=n,a=i)}),s(a||i[0])}else s(null)}catch(e){console.error(e),s(null)}o(!1)}}()},[e,a]),e&&a)?c?(0,i.jsx)("div",{className:n().loading,children:"Chargement..."}):r?(0,i.jsxs)("div",{className:n().container,children:[(0,i.jsxs)("header",{className:n().header,children:[(0,i.jsx)("svg",{className:n().icon,"aria-hidden":"true",focusable:"false",viewBox:"0 0 24 24",children:(0,i.jsx)("path",{fill:"white",d:"M12 2L2 7v7c0 3.31 2.69 6 6 6h8c3.31 0 6-2.69 6-6V7l-10-5zM7 16c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm10-2h-4v-2h4v2z"})}),(0,i.jsx)("h1",{className:n().title,children:"Prochaine arriv\xe9e"})]}),(0,i.jsxs)("main",{className:n().main,children:[(0,i.jsxs)("div",{className:n().leftBox,children:[(0,i.jsx)("h2",{className:n().origin,children:r.arrivalStation}),(0,i.jsx)("p",{className:n().trainNumber,children:r.trainNumber}),(0,i.jsx)("p",{className:n().arrivalTimeLabel,children:"Arriv\xe9e :"}),(0,i.jsx)("p",{className:n().arrivalTime,children:function(e){if(!e)return"";let[a,r]=e.split(":");return"".concat(a,":").concat(r)}(r.arrivalTime)})]}),(0,i.jsx)("div",{className:n().rightBox,children:(0,i.jsx)("ul",{className:n().stationList,children:r.servedStations&&r.servedStations.length>0&&r.servedStations.map((e,a)=>(0,i.jsx)("li",{className:"".concat(n().stationItem," ").concat(0===a||a===r.servedStations.length-1?n().highlightedStation:""),children:"object"==typeof e?e.name:e},a))})}),(0,i.jsxs)("div",{className:n().platformBox,children:[(0,i.jsx)("p",{className:n().platformLabel,children:"Voie"}),(0,i.jsx)("p",{className:n().platformNumber,children:a})]})]})]}):(0,i.jsx)("div",{className:n().noSchedule,children:"Aucune arriv\xe9e trouv\xe9e pour cette gare et ce quai."}):(0,i.jsx)("div",{className:n().error,children:"Param\xe8tres gare et quai requis."})}}},e=>{var a=a=>e(e.s=a);e.O(0,[636,6593,8792],()=>a(4892)),_N_E=e.O()}]);