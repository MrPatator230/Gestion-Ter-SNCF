(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7816],{2319:(e,r,a)=>{"use strict";a.r(r),a.d(r,{default:()=>h});var t=a(7876),i=a(4232),l=a(9099),n=a(3256),s=a.n(n),c=a(5364),d=a(3561),o=a(2507);let u=()=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()],f=e=>{if(!e)return"";let[r,a]=e.split(":");return"".concat(r,":").concat(a)};function h(){let{gare:e}=(0,l.useRouter)().query,{servedStationsLines:r}=(0,i.useContext)(o.l),a=(0,d.N)(),n=a?a.trackAssignments:{},[h,m]=(0,i.useState)([]),[v,p]=(0,i.useState)(!0),[g,x]=(0,i.useState)(0),[_,y]=(0,i.useState)(null),[j,S]=(0,i.useState)(!0);if((0,i.useEffect)(()=>{if(!e)return;let r=!0;return async function(){try{let a=await fetch("/api/stations");if(!a.ok)throw Error("Failed to fetch stations: ".concat(a.status));let t=await a.json();if(r){let r=t.find(r=>r.name===e);y(r||null)}}catch(e){console.error("Failed to fetch station info:",e),r&&y(null)}}(),()=>{r=!1}},[e]),(0,i.useEffect)(()=>{if(!e)return;async function r(){try{let r=await fetch("/api/schedules/by-station?station="+encodeURIComponent(e));if(!r.ok)throw Error("API request failed: ".concat(r.status));let a=(await r.json()).map(e=>{try{return{...e,joursCirculation:e.joursCirculation&&"string"==typeof e.joursCirculation?JSON.parse(e.joursCirculation):e.joursCirculation||[]}}catch(r){return console.warn("Failed to parse data for schedule ".concat(e.id),r),{...e,joursCirculation:[]}}}),t=(0,c.Ag)(a,e,"arrivals").filter(r=>{let a=r.servedStations?r.servedStations.map(e=>"object"==typeof e?e.name:e):[];return r.arrivalStation===e||a.includes(e)}),i=u(),l=t.filter(e=>!e.joursCirculation||0===e.joursCirculation.length||e.joursCirculation.includes(i)),n=(0,c.TP)(l,e,"arrivals");m(n),p(!1)}catch(e){console.error("Failed to fetch schedules:",e),m([]),p(!1)}}r();let a=setInterval(r,15e3);return()=>clearInterval(a)},[e]),(0,i.useEffect)(()=>{if(h.length<5)return void x(0);let e=setInterval(()=>{x(e=>(e+1)%2)},15e3);return()=>clearInterval(e)},[h]),(0,i.useEffect)(()=>{if(h.length<5)return void S(!0);let e=setInterval(()=>{S(e=>!e)},2e3);return()=>clearInterval(e)},[h]),!e)return(0,t.jsx)("main",{className:s().aflContainer,role:"main",children:(0,t.jsx)("p",{className:s().errorMessage,children:"Param\xe8tre gare manquant. Veuillez fournir la gare dans l'URL."})});if(v)return(0,t.jsx)("main",{className:s().aflContainer,role:"main","aria-label":"Tableau des arriv\xe9es",children:(0,t.jsx)("p",{className:s().loadingMessage,children:"Chargement..."})});if(0===h.length)return(0,t.jsx)("main",{className:s().aflContainer,role:"main","aria-label":"Tableau des arriv\xe9es",children:(0,t.jsx)("p",{className:s().noSchedulesMessage,children:"Aucun horaire trouv\xe9 pour cette gare."})});let w=new Date,A=h.filter(r=>{let a=(0,c.Cy)(r,e,"arrival");if(!a)return!1;let[t,i]=a.split(":").map(Number),l=new Date;return l.setHours(t,i,0,0),w-l<=6e4}),T=0===g?A.slice(0,4):A.slice(4,14);return(0,t.jsxs)("div",{lang:"fr",children:[(0,t.jsxs)("header",{className:s().header,children:[(0,t.jsx)("svg",{viewBox:"0 0 368 500",className:s().headerIcon,"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",style:{height:"3rem"},children:(0,t.jsx)("path",{d:"M25.2 495.2L49.6 468h269l24.4 27.2c5.7 6.4 15.1 6.4 20.8 0 5.7-6.4 5.7-16.8 0-23.1l-70.7-78.7c1.6-1.1 3.2-2.3 4.3-3.4 13.1-10.6 25.3-26.9 34.2-52.1 12.4-35.4 21.2-67 23.7-105.9 3.3-48-16.4-122.5-29.4-157.2l-4.6-12.3c-2.8-7.8-13.5-24.4-32.5-44.2C272.3 1.2 256.6 0 232.7 0h-97.2c-23.9 0-39.6 1.2-56 18.3-19 19.8-29.7 36.4-32.6 44.2l-4.6 12.3C29.3 109.5 9.6 184 12.9 232c2.4 38.8 11.2 70.3 23.7 105.8 8.9 25.3 21.1 41.6 34.2 52.1 1.2 1.1 2.7 2.2 4.4 3.3L4.4 472c-5.8 6.4-5.8 16.8 0 23.1 5.8 6.5 15.1 6.5 20.8.1zM79 435.3l26.1-29c12.7 2.9 24.4 2.9 32.9 2.9h92.1c8.5 0 20.2 0 32.9-2.9l26.1 29H79zm190.3-70.7c-13.4 0-24.3-10.9-24.3-24.3s10.9-24.3 24.3-24.3 24.3 10.9 24.3 24.3-10.9 24.3-24.3 24.3zm-220-155.9c-14.9 0 8.5-130.5 19.1-130.5h228.7c11.6 0 38.7 130.5 20.5 130.5H49.3zm24.8 131.6c0-13.4 10.9-24.3 24.3-24.3s24.3 10.9 24.3 24.3-10.9 24.3-24.3 24.3-24.3-10.9-24.3-24.3z",fill:"#ffffff"})}),(0,t.jsx)("h1",{className:s().headerTitle,children:"Arriv\xe9es"}),h.length>=5&&(0,t.jsxs)("div",{className:s().paginationDots,children:[(0,t.jsx)("div",{className:"".concat(s().dot," ").concat(0===g?s().active:""),children:"1"}),(0,t.jsx)("div",{className:"".concat(s().dot," ").concat(1===g?s().active:""),children:"2"})]}),(0,t.jsx)("time",{className:s().headerTime,dateTime:new Date().toISOString(),children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("main",{className:s().aflContainer,role:"main","aria-label":"Tableau des arriv\xe9es",children:[(0,t.jsx)("ul",{className:s().scheduleList,role:"list",children:T.map((r,a)=>{let i=0===g?a:a+4;(0,c.JS)(r);let l=i%2==0,d=(0,c.Cy)(r,e,"arrival",!1),o="on_time";r.isCancelled?o="canceled":r.delayMinutes&&r.delayMinutes>0&&(o="delayed"),r.delayMinutes;let u=r.trainType&&r.trainType.toLowerCase().includes("bus"),h=r.servedStations&&r.servedStations.length>0?r.servedStations:[],m=[];if(h.length>0){let a=h.map(e=>"object"==typeof e?e.name:e),t=a.indexOf(e);m=-1!==t?a.slice(0,t):a,r.departureStation&&(m=[r.departureStation,...m.filter(e=>e!==r.departureStation)])}return(0,t.jsxs)("li",{className:"".concat(s().scheduleRow," ").concat(l?s().scheduleRowEven:s().scheduleRowOdd," ").concat(1===g?s().secondPageLineHeight:""),role:"listitem",children:[(0,t.jsx)("section",{className:s().leftSection,children:i<4?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("time",{className:s().departureTime,dateTime:d,style:{color:"#dfff00",fontWeight:"900"},children:f(d)}),(0,t.jsxs)("div",{className:s().statusBadge,style:{backgroundColor:"on_time"===o?"#187936":"delayed"===o?"#ff7f50":"canceled"===o?"#cf0a0a":"#0057b8"},children:["on_time"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",style:{height:"1.8rem",width:"2rem",marginRight:"1rem",display:"block",marginTop:"auto",marginBottom:"auto"},"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"250",cy:"250",r:"260",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M493.0162,131.3881,167.6317,431.1571c-8.14,7.3934-21.2841,7.3934-29.0509,0L6.9931,310.1741a17.9886,17.9886,0,0,1,0-26.81l38.7594-35.8468c8.29-7.1694,21.2094-7.1694,28.9762,0l63.7774,58.3257c7.7669,7.4681,20.9107,7.4681,29.0509,0l257.5-237.1117a22.0339,22.0339,0,0,1,28.9762,0l38.9087,35.7721a18.0157,18.0157,0,0,1,.0747,26.8851Z",fill:"#187936"})]}),(0,t.jsx)("span",{children:"\xe0 l'heure"})]}),"delayed"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",style:{height:"1.8rem",width:"2rem",marginRight:"1rem",marginLeft:"0.3rem",display:"block",marginTop:"auto",marginBottom:"auto"},"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M250,116.7c-73.5,0-133.3,59.8-133.3,133.3S176.5,383.3,250,383.3,383.3,323.5,383.3,250,323.5,116.7,250,116.7Zm70.5,202.2-87.9-52.3v-100h25v87.9l75,44.7-12.1,19.7Z",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M250,1C112.6516,1,1,112.6516,1,250S112.6516,499,250,499,499,387.3484,499,250,387.3484,1,250,1Zm0,415.0332c-91.3332,0-166.0332-74.7-166.0332-166.0332S157.97,83.9668,250,83.9668,416.0332,158.6668,416.0332,250,341.3332,416.0332,250,416.0332Z",fill:"#ff7f50"})]}),j?(0,t.jsx)("span",{children:"Retard\xe9"}):(0,t.jsxs)("span",{children:["+ ",r.delayMinutes," min"]})]}),"canceled"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",children:[(0,t.jsx)("path",{d:"M250,1C112.6516,1,1,112.6516,1,250S112.6516,499,250,499,499,387.3484,499,250,387.3484,1,250,1ZM374.5,182.87V312.6484c0,30.1788-24.1032,55.0788-54.282,55.0788l23.406,23.406v7.57H312.6484L281.6728,367.03H222.8092l-30.9756,31.6728H157.1728v-7.57l23.406-23.406c-18.1272,0-33.9636-9.0636-44.5212-23.406l-42.23,28.6848a12.2764,12.2764,0,0,1-6.7728,2.2908c-3.7848,0-7.57-2.2908-10.5576-5.2788-3.7848-6.0756-2.2908-13.5456,2.988-17.33l46.812-31.6728a29.136,29.136,0,0,1-.7968-8.2668v-149.4C125.5,108.2692,187.3516,100.7,250,100.7c64.1424,0,116.2332,7.57,123.006,52.788L413.7424,125.6c6.0756-3.7848,13.5456-2.2908,17.33,2.988,3.7847,6.0756,2.2907,13.5456-2.988,17.33Z",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M161.4,327.3c4.5,5.3,10.6,9.1,18.2,9.1a23.6015,23.6015,0,0,0,23.5-23.5,25.8783,25.8783,0,0,0-3-11.4Z",fill:"#ffffff"}),(0,t.jsx)("circle",{cx:"320.5",cy:"312.9",r:"23.5",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M156.1,162.9h78v62.9h-78Zm109.8,63.6,78-53V162.9h-78Zm78,0V203.8l-33.3,22.7Z",fill:"#ffffff"})]}),(0,t.jsx)("span",{children:"Supprim\xe9"})]})]})]}):j?(0,t.jsxs)("div",{className:s().statusBadge,style:{backgroundColor:"on_time"===o?"#187936":"delayed"===o?"#ff7f50":"canceled"===o?"#cf0a0a":"#0057b8"},children:["on_time"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",style:{height:"1.8rem",width:"2rem",marginRight:"1rem",display:"block",marginTop:"auto",marginBottom:"auto"},"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"250",cy:"250",r:"260",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M493.0162,131.3881,167.6317,431.1571c-8.14,7.3934-21.2841,7.3934-29.0509,0L6.9931,310.1741a17.9886,17.9886,0,0,1,0-26.81l38.7594-35.8468c8.29-7.1694,21.2094-7.1694,28.9762,0l63.7774,58.3257c7.7669,7.4681,20.9107,7.4681,29.0509,0l257.5-237.1117a22.0339,22.0339,0,0,1,28.9762,0l38.9087,35.7721a18.0157,18.0157,0,0,1,.0747,26.8851Z",fill:"#187936"})]}),(0,t.jsx)("span",{children:"\xe0 l'heure"})]}),"delayed"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",style:{height:"1.8rem",width:"2rem",marginRight:"1rem",marginLeft:"0.3rem",display:"block",marginTop:"auto",marginBottom:"auto"},"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M250,116.7c-73.5,0-133.3,59.8-133.3,133.3S176.5,383.3,250,383.3,383.3,323.5,383.3,250,323.5,116.7,250,116.7Zm70.5,202.2-87.9-52.3v-100h25v87.9l75,44.7-12.1,19.7Z",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M250,1C112.6516,1,1,112.6516,1,250S112.6516,499,250,499,499,387.3484,499,250,387.3484,1,250,1Zm0,415.0332c-91.3332,0-166.0332-74.7-166.0332-166.0332S157.97,83.9668,250,83.9668,416.0332,158.6668,416.0332,250,341.3332,416.0332,250,416.0332Z",fill:"#ff7f50"})]}),j?(0,t.jsx)("span",{children:"Retard\xe9"}):(0,t.jsxs)("span",{children:["+ ",r.delayMinutes," min"]})]}),"canceled"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",children:[(0,t.jsx)("path",{d:"M250,1C112.6516,1,1,112.6516,1,250S112.6516,499,250,499,499,387.3484,499,250,387.3484,1,250,1ZM374.5,182.87V312.6484c0,30.1788-24.1032,55.0788-54.282,55.0788l23.406,23.406v7.57H312.6484L281.6728,367.03H222.8092l-30.9756,31.6728H157.1728v-7.57l23.406-23.406c-18.1272,0-33.9636-9.0636-44.5212-23.406l-42.23,28.6848a12.2764,12.2764,0,0,1-6.7728,2.2908c-3.7848,0-7.57-2.2908-10.5576-5.2788-3.7848-6.0756-2.2908-13.5456,2.988-17.33l46.812-31.6728a29.136,29.136,0,0,1-.7968-8.2668v-149.4C125.5,108.2692,187.3516,100.7,250,100.7c64.1424,0,116.2332,7.57,123.006,52.788L413.7424,125.6c6.0756-3.7848,13.5456-2.2908,17.33,2.988,3.7847,6.0756,2.2907,13.5456-2.988,17.33Z",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M161.4,327.3c4.5,5.3,10.6,9.1,18.2,9.1a23.6015,23.6015,0,0,0,23.5-23.5,25.8783,25.8783,0,0,0-3-11.4Z",fill:"#ffffff"}),(0,t.jsx)("circle",{cx:"320.5",cy:"312.9",r:"23.5",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M156.1,162.9h78v62.9h-78Zm109.8,63.6,78-53V162.9h-78Zm78,0V203.8l-33.3,22.7Z",fill:"#ffffff"})]}),(0,t.jsx)("span",{children:"Supprim\xe9"})]})]}):(0,t.jsx)("time",{className:s().departureTime,dateTime:d,style:{color:"#dfff00",fontWeight:"900"},children:f(d)})}),(0,t.jsxs)("section",{className:s().trainInfo,children:[(0,t.jsx)("div",{children:r.trainType||""}),(0,t.jsx)("div",{children:r.trainNumber||""})]}),(0,t.jsx)("section",{className:s().middleSection,children:(0,t.jsxs)("div",{className:s().destinationRow,style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u?(0,t.jsx)("i",{className:"bi bi-bus-front-fill","aria-label":"Bus",role:"img"}):(0,t.jsx)("i",{className:"bi bi-train-front-fill","aria-label":"Train",role:"img"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,t.jsx)("div",{children:r.departureStation}),("delayed"===o||"canceled"===o)&&(r.cause||""===r.cause)&&(0,t.jsx)("div",{className:s().causeBadge,style:{backgroundColor:"canceled"===o?"#cf0a0a":"#ff7f50"},"aria-label":"Cause: ".concat(r.cause||""),children:r.cause||""})]})]})}),(0,t.jsxs)("section",{className:s().rightSection,"aria-label":"Voie",children:[(0,t.jsx)("div",{className:s().label,children:"Voie"}),"canceled"===o?(0,t.jsx)("svg",{viewBox:"0 0 500 500",style:{width:"100%",height:"100%"},"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M329.182,250,483.1636,96.1178c21.1152-21.1152,21.1152-58.0668,0-79.182s-58.0668-21.1152-79.182,0L250,170.8178,96.118,16.8362c-21.1152-21.1152-58.0668-21.1152-79.182,0s-21.1152,58.0668,0,79.182L170.818,250,16.8364,403.8818c-21.1152,21.1152-21.1152,58.0668,0,79.182s58.0668,21.1152,79.182,0L250,329.1818l153.882,153.882c21.1152,21.1152,58.0668,21.1152,79.182,0s21.1152-58.0668,0-79.182Z",fill:"#cf0a0a"})}):(()=>{var a,i,l,s;if(!_||!_.locationType)return(0,t.jsx)("div",{children:(null==(a=n[r.id])?void 0:a[e])||r.track||"-"});let d=new Date,o=(0,c.Cy)(r,e,"arrival");if(!o)return(0,t.jsx)("div",{children:(null==(i=n[r.id])?void 0:i[e])||r.track||"-"});let[u,f]=o.split(":").map(Number),h=new Date;h.setHours(u,f,0,0);let m=(h-d)/6e4;if("ville"===_.locationType.toLowerCase()){if(m<=20&&m>=0)return(0,t.jsx)("div",{children:(null==(l=n[r.id])?void 0:l[e])||r.track||"-"})}else if("interurbain"===_.locationType.toLowerCase()&&m<=720&&m>=0)return(0,t.jsx)("div",{children:(null==(s=n[r.id])?void 0:s[e])||r.track||"-"});return(0,t.jsx)("div",{children:"-"})})()]})]},r.id||i)})}),1===g&&h.length>0&&(0,t.jsx)("section",{className:s().nextDaySection,children:(0,t.jsx)("p",{className:s().nextDayText,children:"Les prochaines arriv\xe9es auront lieu demain."})})]})]})}},3256:e=>{e.exports={aflContainer:"AflArrivee_aflContainer__VSYpZ",scrollContainer:"AflArrivee_scrollContainer__eTaKt",scrollContent:"AflArrivee_scrollContent__L78AG",bold:"AflArrivee_bold__t3A_3",arrow:"AflArrivee_arrow__WybtT",header:"AflArrivee_header__GCBjj",headerIcon:"AflArrivee_headerIcon___WtHB",headerTitle:"AflArrivee_headerTitle__gEQT0",headerTime:"AflArrivee_headerTime__cr5_T",paginationDots:"AflArrivee_paginationDots__uER3g",dot:"AflArrivee_dot__5PRCn",active:"AflArrivee_active__8ZD5d",scheduleList:"AflArrivee_scheduleList__1loli",scheduleRow:"AflArrivee_scheduleRow__lEoie",leftSection:"AflArrivee_leftSection__rnCNy",departureTime:"AflArrivee_departureTime__hPk4f",statusBadge:"AflArrivee_statusBadge__2zOu1",trainInfo:"AflArrivee_trainInfo__AAqqn",middleSection:"AflArrivee_middleSection__UZ0fD",destinationRow:"AflArrivee_destinationRow__YSl_C",viaRow:"AflArrivee_viaRow__cMmj3",rightSection:"AflArrivee_rightSection__yh96V",label:"AflArrivee_label__nz750",marquee:"AflArrivee_marquee__lzDg1",causeBadge:"AflArrivee_causeBadge__lJpg9",nextDaySection:"AflArrivee_nextDaySection__XGGdV",nextDayText:"AflArrivee_nextDayText__wRveL",secondPageLineHeight:"AflArrivee_secondPageLineHeight__pnhb4"}},5364:(e,r,a)=>{"use strict";a.d(r,{$t:()=>c,Ag:()=>o,Cy:()=>d,EU:()=>n,Ix:()=>h,JS:()=>s,Kg:()=>m,Os:()=>t,TP:()=>f,oP:()=>u});let t=()=>JSON.parse(localStorage.getItem("schedules")||"[]"),i=e=>e&&e.trainNumber&&e.departureStation&&e.arrivalStation&&e.departureTime&&e.arrivalTime,l=e=>{let r;if(!e)return[];if("string"==typeof e)try{r=JSON.parse(e)}catch(e){return console.error("Failed to parse servedStations",e),[]}else r=e;return Array.isArray(r)?r.map(e=>"string"==typeof e?{name:e,arrivalTime:null,departureTime:null}:e).filter(e=>e&&e.name):[]},n=(e,r)=>{if(!e||!r)return e;let[a,t]=e.split(":").map(Number),i=60*a+t+r,l=Math.floor(i/60)%24;return"".concat(String(l).padStart(2,"0"),":").concat(String(i%60).padStart(2,"0"))},s=e=>e.isCancelled?{status:"cancelled",label:"Train supprim\xe9",className:"status-cancelled"}:e.delayMinutes?{status:"delayed",label:"Retard ".concat(e.delayMinutes," min"),className:"status-delayed",delayedTime:n(e.departureTime,e.delayMinutes)}:{status:"ontime",label:"\xc0 l'heure",className:"status-ontime"},c=e=>{try{if(!e)return[];return t().filter(i).filter(r=>r.departureStation===e||r.arrivalStation===e||l(r.servedStations).some(r=>r.name===e))}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des horaires:",e),[]}},d=function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"departure",t=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(!e||!r)return null;try{if("departure"===a){if(e.departureStation===r)return e.isCancelled?e.departureTime:t&&e.delayMinutes?n(e.departureTime,e.delayMinutes):e.departureTime;let a=l(e.servedStations).find(e=>e.name===r);if(!a)return null;return t&&e.delayMinutes&&a.departureTime?n(a.departureTime,e.delayMinutes):a.departureTime||null}{if(e.arrivalStation===r)return e.isCancelled?e.arrivalTime:t&&e.delayMinutes?n(e.arrivalTime,e.delayMinutes):e.arrivalTime;let a=l(e.servedStations).find(e=>e.name===r);if(!a)return null;return t&&e.delayMinutes&&a.arrivalTime?n(a.arrivalTime,e.delayMinutes):a.arrivalTime||null}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration de l'heure:",e),null}},o=function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"departures";if(!e||!r)return[];try{return e.filter(e=>!!i(e)&&("departures"===a?e.departureStation===r||l(e.servedStations).some(e=>e.name===r&&e.departureTime):e.arrivalStation===r||l(e.servedStations).some(e=>e.name===r&&e.arrivalTime)))}catch(e){return console.error("Erreur lors du filtrage des horaires:",e),[]}},u=function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"departures";if(!e||!r)return"";try{if("departures"===a){if(e.departureStation===r)return e.arrivalStation;let a=l(e.servedStations),t=a.findIndex(e=>e.name===r);if(-1!==t&&t<a.length-1)return a[t+1].name;return e.arrivalStation}{if(e.arrivalStation===r)return e.departureStation;let a=l(e.servedStations),t=a.findIndex(e=>e.name===r);if(t>0)return a[t-1].name;return e.departureStation}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration de la destination/provenance:",e),""}},f=function(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"departures";if(!e||!r)return[];try{return[...e].sort((e,t)=>{let i=d(e,r,"departures"===a?"departure":"arrival")||"",l=d(t,r,"departures"===a?"departure":"arrival")||"";return i.localeCompare(l)})}catch(r){return console.error("Erreur lors du tri des horaires:",r),e}},h=e=>{let r=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],a=r.indexOf(e);return -1===a?null:r[(a+1)%r.length]},m=(e,r)=>e&&r?e.filter(e=>!e.joursCirculation||0===e.joursCirculation.length||e.joursCirculation.includes(r)):[]},7372:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/afficheurs/afl/arrivees",function(){return a(2319)}])}},e=>{var r=r=>e(e.s=r);e.O(0,[636,6593,8792],()=>r(7372)),_N_E=e.O()}]);