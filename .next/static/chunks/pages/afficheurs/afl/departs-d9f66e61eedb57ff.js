(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5234],{3708:e=>{e.exports={aflContainer:"AflDepart_aflContainer__zEZLw",scrollContainer:"AflDepart_scrollContainer__Ahl6K",scrollContent:"AflDepart_scrollContent__Z2ESa",bold:"AflDepart_bold__qnLR2",arrow:"AflDepart_arrow__eH6lJ",header:"AflDepart_header__qN52_",headerIcon:"AflDepart_headerIcon__IanxN",headerTitle:"AflDepart_headerTitle__vldxe",headerTime:"AflDepart_headerTime__ToZ3Y",paginationDots:"AflDepart_paginationDots__gO_T1",dot:"AflDepart_dot__Gi3p1",active:"AflDepart_active__vt_9T",scheduleList:"AflDepart_scheduleList__nZ5qF",scheduleRow:"AflDepart_scheduleRow__AWCtA",leftSection:"AflDepart_leftSection__Pen8F",departureTime:"AflDepart_departureTime__uIrB1",statusBadge:"AflDepart_statusBadge__KHFOG",trainInfo:"AflDepart_trainInfo__Kz3f5",middleSection:"AflDepart_middleSection__ZR8SP",destinationRow:"AflDepart_destinationRow__CHxnc",viaRow:"AflDepart_viaRow__4eQ9s",rightSection:"AflDepart_rightSection__2ccl0",label:"AflDepart_label__TuIzW",marquee:"AflDepart_marquee__KH0Cn",causeBadge:"AflDepart_causeBadge__2C9Du",nextDaySection:"AflDepart_nextDaySection__xzEuc",nextDayText:"AflDepart_nextDayText__LwEsa",secondPageLineHeight:"AflDepart_secondPageLineHeight__my0vZ"}},5364:(e,a,r)=>{"use strict";r.d(a,{$t:()=>c,Ag:()=>o,Cy:()=>d,EU:()=>s,Ix:()=>h,JS:()=>n,Kg:()=>m,Os:()=>t,TP:()=>f,oP:()=>u});let t=()=>JSON.parse(localStorage.getItem("schedules")||"[]"),l=e=>e&&e.trainNumber&&e.departureStation&&e.arrivalStation&&e.departureTime&&e.arrivalTime,i=e=>{let a;if(!e)return[];if("string"==typeof e)try{a=JSON.parse(e)}catch(e){return console.error("Failed to parse servedStations",e),[]}else a=e;return Array.isArray(a)?a.map(e=>"string"==typeof e?{name:e,arrivalTime:null,departureTime:null}:e).filter(e=>e&&e.name):[]},s=(e,a)=>{if(!e||!a)return e;let[r,t]=e.split(":").map(Number),l=60*r+t+a,i=Math.floor(l/60)%24;return"".concat(String(i).padStart(2,"0"),":").concat(String(l%60).padStart(2,"0"))},n=e=>e.isCancelled?{status:"cancelled",label:"Train supprim\xe9",className:"status-cancelled"}:e.delayMinutes?{status:"delayed",label:"Retard ".concat(e.delayMinutes," min"),className:"status-delayed",delayedTime:s(e.departureTime,e.delayMinutes)}:{status:"ontime",label:"\xc0 l'heure",className:"status-ontime"},c=e=>{try{if(!e)return[];return t().filter(l).filter(a=>a.departureStation===e||a.arrivalStation===e||i(a.servedStations).some(a=>a.name===e))}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration des horaires:",e),[]}},d=function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"departure",t=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(!e||!a)return null;try{if("departure"===r){if(e.departureStation===a)return e.isCancelled?e.departureTime:t&&e.delayMinutes?s(e.departureTime,e.delayMinutes):e.departureTime;let r=i(e.servedStations).find(e=>e.name===a);if(!r)return null;return t&&e.delayMinutes&&r.departureTime?s(r.departureTime,e.delayMinutes):r.departureTime||null}{if(e.arrivalStation===a)return e.isCancelled?e.arrivalTime:t&&e.delayMinutes?s(e.arrivalTime,e.delayMinutes):e.arrivalTime;let r=i(e.servedStations).find(e=>e.name===a);if(!r)return null;return t&&e.delayMinutes&&r.arrivalTime?s(r.arrivalTime,e.delayMinutes):r.arrivalTime||null}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration de l'heure:",e),null}},o=function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"departures";if(!e||!a)return[];try{return e.filter(e=>!!l(e)&&("departures"===r?e.departureStation===a||i(e.servedStations).some(e=>e.name===a&&e.departureTime):e.arrivalStation===a||i(e.servedStations).some(e=>e.name===a&&e.arrivalTime)))}catch(e){return console.error("Erreur lors du filtrage des horaires:",e),[]}},u=function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"departures";if(!e||!a)return"";try{if("departures"===r){if(e.departureStation===a)return e.arrivalStation;let r=i(e.servedStations),t=r.findIndex(e=>e.name===a);if(-1!==t&&t<r.length-1)return r[t+1].name;return e.arrivalStation}{if(e.arrivalStation===a)return e.departureStation;let r=i(e.servedStations),t=r.findIndex(e=>e.name===a);if(t>0)return r[t-1].name;return e.departureStation}}catch(e){return console.error("Erreur lors de la r\xe9cup\xe9ration de la destination/provenance:",e),""}},f=function(e,a){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"departures";if(!e||!a)return[];try{return[...e].sort((e,t)=>{let l=d(e,a,"departures"===r?"departure":"arrival")||"",i=d(t,a,"departures"===r?"departure":"arrival")||"";return l.localeCompare(i)})}catch(a){return console.error("Erreur lors du tri des horaires:",a),e}},h=e=>{let a=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r=a.indexOf(e);return -1===r?null:a[(r+1)%a.length]},m=(e,a)=>e&&a?e.filter(e=>!e.joursCirculation||0===e.joursCirculation.length||e.joursCirculation.includes(a)):[]},7164:(e,a,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/afficheurs/afl/departs",function(){return r(9675)}])},9675:(e,a,r)=>{"use strict";r.r(a),r.d(a,{default:()=>m});var t=r(7876),l=r(4232),i=r(9099),s=r(3708),n=r.n(s),c=r(5364),d=r(3561),o=r(2507);let u=()=>["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date().getDay()],f=e=>{if(!e)return"";let[a,r]=e.split(":");return"".concat(a,":").concat(r)},h=e=>{let{stations:a,scrollDuration:r}=e,i=(0,l.useRef)(null);return((0,l.useEffect)(()=>{let e=i.current;if(!e||e.scrollWidth<=e.clientWidth)return;let a=e.scrollWidth/2,t=a/(r/40),l=3,s=setInterval(()=>{l>=a&&(l=0),e.scrollLeft=l+=t},40);return()=>clearInterval(s)},[a,r]),a&&0!==a.length)?(0,t.jsx)("div",{className:n().scrollContainer,ref:i,children:(0,t.jsxs)("div",{className:n().scrollContent,children:[a.map((e,r)=>(0,t.jsxs)("span",{className:0===r?n().bold:"",children:[e,r<a.length-1&&(0,t.jsx)("span",{className:n().arrow,children:" > "})]},r)),i.current&&i.current.scrollWidth>i.current.clientWidth&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("span",{style:{display:"inline-block",width:"87px"},"aria-hidden":"true"}),a.map((e,r)=>(0,t.jsxs)("span",{className:0===r?n().bold:"",children:[e,r<a.length-1&&(0,t.jsx)("span",{className:n().arrow,children:" > "})]},"dup-".concat(r)))]})]})}):null};function m(){let{gare:e}=(0,i.useRouter)().query,{servedStationsLines:a}=(0,l.useContext)(o.l),r=(0,d.N)(),s=r?r.trackAssignments:{},[m,p]=(0,l.useState)([]),[g,x]=(0,l.useState)(!0),[v,j]=(0,l.useState)(0),[_,y]=(0,l.useState)(null),[w,S]=(0,l.useState)(!0);if((0,l.useEffect)(()=>{async function a(){if(e)try{let a=await fetch("/api/stations");if(!a.ok)throw Error("Failed to fetch stations: ".concat(a.status));let r=(await a.json()).find(a=>a.name===e);y(r||null)}catch(e){console.error("Failed to fetch station info:",e),y(null)}}async function r(){if(e){try{let a=await fetch("/api/schedules/by-station?station="+e);if(!a.ok)throw Error("API request failed: ".concat(a.status));let r=(await a.json()).map(e=>{try{return{...e,joursCirculation:e.joursCirculation&&"string"==typeof e.joursCirculation?JSON.parse(e.joursCirculation):e.joursCirculation||[]}}catch(a){return console.warn("Failed to parse data for schedule ".concat(e.id),a),{...e,joursCirculation:[]}}}),t=(0,c.Ag)(r,e,"departures").filter(a=>{let r=a.servedStations?a.servedStations.map(e=>"object"==typeof e?e.name:e):[];return a.departureStation===e||r.includes(e)}),l=u(),i=t.filter(e=>!e.joursCirculation||0===e.joursCirculation.length||e.joursCirculation.includes(l)),s=(0,c.TP)(i,e,"departures");p(s)}catch(e){console.error("Failed to fetch schedules:",e),p([])}x(!1)}else p([]),x(!1)}!async function(){await a(),await r()}()},[e]),(0,l.useEffect)(()=>{if(m.length<5)return void j(0);let e=setInterval(()=>{j(e=>(e+1)%2)},15e3);return()=>clearInterval(e)},[m]),(0,l.useEffect)(()=>{if(m.length<5)return void S(!0);let e=setInterval(()=>{S(e=>!e)},2e3);return()=>clearInterval(e)},[m]),!e)return(0,t.jsx)("main",{className:n().aflContainer,role:"main",children:(0,t.jsx)("p",{className:n().errorMessage,children:"Param\xe8tre gare manquant. Veuillez fournir la gare dans l'URL."})});if(g)return(0,t.jsx)("main",{className:n().aflContainer,role:"main","aria-label":"Tableau des d\xe9parts",children:(0,t.jsx)("p",{className:n().loadingMessage,children:"Chargement..."})});if(0===m.length)return(0,t.jsx)("main",{className:n().aflContainer,role:"main","aria-label":"Tableau des d\xe9parts",children:(0,t.jsx)("p",{className:n().noSchedulesMessage,children:"Aucun horaire trouv\xe9 pour cette gare."})});let T=new Date,b=m.filter(a=>{let r=(0,c.Cy)(a,e,"departure");if(!r)return!1;let[t,l]=r.split(":").map(Number),i=new Date;return i.setHours(t,l,0,0),T-i<=6e4}),N=0===v?b.slice(0,4):b.slice(4,14);return(0,t.jsxs)("div",{lang:"fr",children:[(0,t.jsxs)("header",{className:n().header,children:[(0,t.jsx)("svg",{viewBox:"0 0 368 500",className:n().headerIcon,"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",style:{height:"3rem"},children:(0,t.jsx)("path",{d:"M25.2 495.2L49.6 468h269l24.4 27.2c5.7 6.4 15.1 6.4 20.8 0 5.7-6.4 5.7-16.8 0-23.1l-70.7-78.7c1.6-1.1 3.2-2.3 4.3-3.4 13.1-10.6 25.3-26.9 34.2-52.1 12.4-35.4 21.2-67 23.7-105.9 3.3-48-16.4-122.5-29.4-157.2l-4.6-12.3c-2.8-7.8-13.5-24.4-32.5-44.2C272.3 1.2 256.6 0 232.7 0h-97.2c-23.9 0-39.6 1.2-56 18.3-19 19.8-29.7 36.4-32.6 44.2l-4.6 12.3C29.3 109.5 9.6 184 12.9 232c2.4 38.8 11.2 70.3 23.7 105.8 8.9 25.3 21.1 41.6 34.2 52.1 1.2 1.1 2.7 2.2 4.4 3.3L4.4 472c-5.8 6.4-5.8 16.8 0 23.1 5.8 6.5 15.1 6.5 20.8.1zM79 435.3l26.1-29c12.7 2.9 24.4 2.9 32.9 2.9h92.1c8.5 0 20.2 0 32.9-2.9l26.1 29H79zm190.3-70.7c-13.4 0-24.3-10.9-24.3-24.3s10.9-24.3 24.3-24.3 24.3 10.9 24.3 24.3-10.9 24.3-24.3 24.3zm-220-155.9c-14.9 0 8.5-130.5 19.1-130.5h228.7c11.6 0 38.7 130.5 20.5 130.5H49.3zm24.8 131.6c0-13.4 10.9-24.3 24.3-24.3s24.3 10.9 24.3 24.3-10.9 24.3-24.3 24.3-24.3-10.9-24.3-24.3z",fill:"#ffffff"})}),(0,t.jsx)("h1",{className:n().headerTitle,children:"D\xe9parts"}),m.length>=5&&(0,t.jsxs)("div",{className:n().paginationDots,children:[(0,t.jsx)("div",{className:"".concat(n().dot," ").concat(0===v?n().active:""),children:"1"}),(0,t.jsx)("div",{className:"".concat(n().dot," ").concat(1===v?n().active:""),children:"2"})]}),(0,t.jsx)("time",{className:n().headerTime,dateTime:new Date().toISOString(),children:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,t.jsxs)("main",{className:n().aflContainer,role:"main","aria-label":"Tableau des d\xe9parts",children:[(0,t.jsx)("ul",{className:n().scheduleList,role:"list",children:N.map((a,r)=>{let l=0===v?r:r+4;(0,c.JS)(a);let i=l%2==0,d=(0,c.Cy)(a,e,"departure",!1),o="on_time";a.isCancelled?o="canceled":a.delayMinutes&&a.delayMinutes>0&&(o="delayed"),a.delayMinutes;let u=a.trainType&&a.trainType.toLowerCase().includes("bus"),m=a.servedStations&&a.servedStations.length>0?a.servedStations:[],p=[];if(m.length>0){let a=m.map(e=>"object"==typeof e?e.name:e),r=a.indexOf(e);p=-1!==r?a.slice(r+1):a}return(0,t.jsxs)("li",{className:"".concat(n().scheduleRow," ").concat(i?n().scheduleRowEven:n().scheduleRowOdd," ").concat(1===v?n().secondPageLineHeight:""),role:"listitem",children:[(0,t.jsx)("section",{className:n().leftSection,children:l<4?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("time",{className:n().departureTime,dateTime:d,style:{color:"#dfff00",fontWeight:"900"},children:f(d)}),(0,t.jsxs)("div",{className:n().statusBadge,style:{backgroundColor:"on_time"===o?"#0057b8":"delayed"===o?"#ff7f50":"canceled"===o?"#cf0a0a":"#0057b8"},children:["on_time"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",style:{height:"1.8rem",width:"2rem",marginRight:"1rem",display:"block",marginTop:"auto",marginBottom:"auto"},"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"250",cy:"250",r:"260",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M493.0162,131.3881,167.6317,431.1571c-8.14,7.3934-21.2841,7.3934-29.0509,0L6.9931,310.1741a17.9886,17.9886,0,0,1,0-26.81l38.7594-35.8468c8.29-7.1694,21.2094-7.1694,28.9762,0l63.7774,58.3257c7.7669,7.4681,20.9107,7.4681,29.0509,0l257.5-237.1117a22.0339,22.0339,0,0,1,28.9762,0l38.9087,35.7721a18.0157,18.0157,0,0,1,.0747,26.8851Z",fill:"#0057b8"})]}),(0,t.jsx)("span",{children:"\xe0 l'heure"})]}),"delayed"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",style:{height:"1.8rem",width:"2rem",marginRight:"1rem",marginLeft:"0.3rem",display:"block",marginTop:"auto",marginBottom:"auto"},"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M250,116.7c-73.5,0-133.3,59.8-133.3,133.3S176.5,383.3,250,383.3,383.3,323.5,383.3,250,323.5,116.7,250,116.7Zm70.5,202.2-87.9-52.3v-100h25v87.9l75,44.7-12.1,19.7Z",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M250,1C112.6516,1,1,112.6516,1,250S112.6516,499,250,499,499,387.3484,499,250,387.3484,1,250,1Zm0,415.0332c-91.3332,0-166.0332-74.7-166.0332-166.0332S157.97,83.9668,250,83.9668,416.0332,158.6668,416.0332,250,341.3332,416.0332,250,416.0332Z",fill:"#ff7f50"})]}),w?(0,t.jsx)("span",{children:"Retard\xe9"}):(0,t.jsxs)("span",{children:["+ ",a.delayMinutes," min"]})]}),"canceled"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",children:[(0,t.jsx)("path",{d:"M250,1C112.6516,1,1,112.6516,1,250S112.6516,499,250,499,499,387.3484,499,250,387.3484,1,250,1ZM374.5,182.87V312.6484c0,30.1788-24.1032,55.0788-54.282,55.0788l23.406,23.406v7.57H312.6484L281.6728,367.03H222.8092l-30.9756,31.6728H157.1728v-7.57l23.406-23.406c-18.1272,0-33.9636-9.0636-44.5212-23.406l-42.23,28.6848a12.2764,12.2764,0,0,1-6.7728,2.2908c-3.7848,0-7.57-2.2908-10.5576-5.2788-3.7848-6.0756-2.2908-13.5456,2.988-17.33l46.812-31.6728a29.136,29.136,0,0,1-.7968-8.2668v-149.4C125.5,108.2692,187.3516,100.7,250,100.7c64.1424,0,116.2332,7.57,123.006,52.788L413.7424,125.6c6.0756-3.7848,13.5456-2.2908,17.33,2.988,3.7847,6.0756,2.2907,13.5456-2.988,17.33Z",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M161.4,327.3c4.5,5.3,10.6,9.1,18.2,9.1a23.6015,23.6015,0,0,0,23.5-23.5,25.8783,25.8783,0,0,0-3-11.4Z",fill:"#ffffff"}),(0,t.jsx)("circle",{cx:"320.5",cy:"312.9",r:"23.5",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M156.1,162.9h78v62.9h-78Zm109.8,63.6,78-53V162.9h-78Zm78,0V203.8l-33.3,22.7Z",fill:"#ffffff"})]}),(0,t.jsx)("span",{children:"Supprim\xe9"})]})]})]}):w?(0,t.jsxs)("div",{className:n().statusBadge,style:{backgroundColor:"on_time"===o?"#0057b8":"delayed"===o?"#ff7f50":"canceled"===o?"#cf0a0a":"#0057b8"},children:["on_time"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",style:{height:"1.8rem",width:"2rem",marginRight:"1rem",display:"block",marginTop:"auto",marginBottom:"auto"},"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("circle",{cx:"250",cy:"250",r:"260",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M493.0162,131.3881,167.6317,431.1571c-8.14,7.3934-21.2841,7.3934-29.0509,0L6.9931,310.1741a17.9886,17.9886,0,0,1,0-26.81l38.7594-35.8468c8.29-7.1694,21.2094-7.1694,28.9762,0l63.7774,58.3257c7.7669,7.4681,20.9107,7.4681,29.0509,0l257.5-237.1117a22.0339,22.0339,0,0,1,28.9762,0l38.9087,35.7721a18.0157,18.0157,0,0,1,.0747,26.8851Z",fill:"#0057b8"})]}),(0,t.jsx)("span",{children:"\xe0 l'heure"})]}),"delayed"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",style:{height:"1.8rem",width:"2rem",marginRight:"1rem",marginLeft:"0.3rem",display:"block",marginTop:"auto",marginBottom:"auto"},"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",children:[(0,t.jsx)("path",{d:"M250,116.7c-73.5,0-133.3,59.8-133.3,133.3S176.5,383.3,250,383.3,383.3,323.5,383.3,250,323.5,116.7,250,116.7Zm70.5,202.2-87.9-52.3v-100h25v87.9l75,44.7-12.1,19.7Z",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M250,1C112.6516,1,1,112.6516,1,250S112.6516,499,250,499,499,387.3484,499,250,387.3484,1,250,1Zm0,415.0332c-91.3332,0-166.0332-74.7-166.0332-166.0332S157.97,83.9668,250,83.9668,416.0332,158.6668,416.0332,250,341.3332,416.0332,250,416.0332Z",fill:"#ff7f50"})]}),w?(0,t.jsx)("span",{children:"Retard\xe9"}):(0,t.jsxs)("span",{children:["+ ",a.delayMinutes," min"]})]}),"canceled"===o&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{viewBox:"0 0 500 500",children:[(0,t.jsx)("path",{d:"M250,1C112.6516,1,1,112.6516,1,250S112.6516,499,250,499,499,387.3484,499,250,387.3484,1,250,1ZM374.5,182.87V312.6484c0,30.1788-24.1032,55.0788-54.282,55.0788l23.406,23.406v7.57H312.6484L281.6728,367.03H222.8092l-30.9756,31.6728H157.1728v-7.57l23.406-23.406c-18.1272,0-33.9636-9.0636-44.5212-23.406l-42.23,28.6848a12.2764,12.2764,0,0,1-6.7728,2.2908c-3.7848,0-7.57-2.2908-10.5576-5.2788-3.7848-6.0756-2.2908-13.5456,2.988-17.33l46.812-31.6728a29.136,29.136,0,0,1-.7968-8.2668v-149.4C125.5,108.2692,187.3516,100.7,250,100.7c64.1424,0,116.2332,7.57,123.006,52.788L413.7424,125.6c6.0756-3.7848,13.5456-2.2908,17.33,2.988,3.7847,6.0756,2.2907,13.5456-2.988,17.33Z",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M161.4,327.3c4.5,5.3,10.6,9.1,18.2,9.1a23.6015,23.6015,0,0,0,23.5-23.5,25.8783,25.8783,0,0,0-3-11.4Z",fill:"#ffffff"}),(0,t.jsx)("circle",{cx:"320.5",cy:"312.9",r:"23.5",fill:"#ffffff"}),(0,t.jsx)("path",{d:"M156.1,162.9h78v62.9h-78Zm109.8,63.6,78-53V162.9h-78Zm78,0V203.8l-33.3,22.7Z",fill:"#ffffff"})]}),(0,t.jsx)("span",{children:"Supprim\xe9"})]})]}):(0,t.jsx)("time",{className:n().departureTime,dateTime:d,style:{color:"#dfff00",fontWeight:"900"},children:f(d)})}),(0,t.jsxs)("section",{className:n().trainInfo,children:[(0,t.jsx)("div",{children:a.trainType||""}),(0,t.jsx)("div",{children:a.trainNumber||""})]}),(0,t.jsxs)("section",{className:n().middleSection,children:[(0,t.jsxs)("div",{className:n().destinationRow,style:{display:"flex",alignItems:"center",gap:"1rem"},children:[u?(0,t.jsx)("i",{className:"bi bi-bus-front-fill","aria-label":"Bus",role:"img"}):(0,t.jsx)("i",{className:"bi bi-train-front-fill","aria-label":"Train",role:"img"}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[(0,t.jsx)("div",{children:a.arrivalStation}),("delayed"===o||"canceled"===o)&&(a.cause||""===a.cause)&&(0,t.jsx)("div",{className:n().causeBadge,style:{backgroundColor:"canceled"===o?"#cf0a0a":"#ff7f50"},"aria-label":"Cause: ".concat(a.cause||""),children:a.cause||""})]})]}),0===v&&(0,t.jsxs)("div",{className:n().viaRow,children:[(0,t.jsx)("span",{children:"Via"}),(0,t.jsx)(h,{stations:p,scrollDuration:1e4})]})]}),(0,t.jsxs)("section",{className:n().rightSection,"aria-label":"Voie",children:[(0,t.jsx)("div",{className:n().label,children:"Voie"}),"canceled"===o?(0,t.jsx)("svg",{viewBox:"0 0 500 500",style:{width:"auto",height:"auto"},"aria-hidden":"true",focusable:"false",role:"img",xmlns:"http://www.w3.org/2000/svg",children:(0,t.jsx)("path",{d:"M329.182,250,483.1636,96.1178c21.1152-21.1152,21.1152-58.0668,0-79.182s-58.0668-21.1152-79.182,0L250,170.8178,96.118,16.8362c-21.1152-21.1152-58.0668-21.1152-79.182,0s-21.1152,58.0668,0,79.182L170.818,250,16.8364,403.8818c-21.1152,21.1152-21.1152,58.0668,0,79.182s58.0668,21.1152,79.182,0L250,329.1818l153.882,153.882c21.1152,21.1152,58.0668,21.1152,79.182,0s21.1152-58.0668,0-79.182Z",fill:"#cf0a0a"})}):(()=>{var r,l,i,n;if(!_||!_.locationType)return(0,t.jsx)("div",{children:(null==(r=s[a.id])?void 0:r[e])||a.track||"-"});let d=new Date,o=(0,c.Cy)(a,e,"departure");if(!o)return(0,t.jsx)("div",{children:(null==(l=s[a.id])?void 0:l[e])||a.track||"-"});let[u,f]=o.split(":").map(Number),h=new Date;h.setHours(u,f,0,0);let m=(h-d)/6e4;if("ville"===_.locationType.toLowerCase()){if(m<=20&&m>=0)return(0,t.jsx)("div",{children:(null==(i=s[a.id])?void 0:i[e])||a.track||"-"})}else if("interurbain"===_.locationType.toLowerCase()&&m<=720&&m>=0)return(0,t.jsx)("div",{children:(null==(n=s[a.id])?void 0:n[e])||a.track||"-"});return(0,t.jsx)("div",{children:"-"})})()]})]},a.id||l)})}),1===v&&m.length>0&&(0,t.jsx)("section",{className:n().nextDaySection,children:(0,t.jsx)("p",{className:n().nextDayText,children:"Les prochains d\xe9parts auront lieu demain."})})]})]})}}},e=>{var a=a=>e(e.s=a);e.O(0,[636,6593,8792],()=>a(7164)),_N_E=e.O()}]);