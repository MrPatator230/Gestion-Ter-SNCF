(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9283],{41:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>f});var r=s(7876),i=s(4250),t=s.n(i),c=s(4232),l=s(8230),n=s.n(l),d=s(207),o=s(3874);function f(){let[e,a]=(0,c.useState)([]),[s,i]=(0,c.useState)(!0),[l,f]=(0,c.useState)("");(0,c.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/stations");if(!e.ok)throw Error("Failed to fetch stations");let s=await e.json();a(s)}catch(e){console.error("Error fetching stations:",e),a([])}finally{i(!1)}})()},[]);let x=e.filter(e=>e.name.toLowerCase().includes(l.toLowerCase())),[m,b]=(0,c.useState)(!1),[j,u]=(0,c.useState)(null),[h,p]=(0,c.useState)(""),[g,N]=(0,c.useState)(!1),[v,w]=(0,c.useState)(null),[y,k]=(0,c.useState)(null),z=e=>{u(e),p(e.message||""),w(null),k(null),b(!0)},C=async()=>{if(j){N(!0),w(null),k(null);try{if(!(await fetch("/api/stations",{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:j.id,message:h})})).ok)throw Error("Failed to save message");k("Message enregistr\xe9 avec succ\xe8s"),a(e=>e.map(e=>e.id===j.id?{...e,message:h}:e))}catch(e){w(e.message||"Erreur lors de l'enregistrement")}finally{N(!1)}}};return(0,r.jsxs)(d.A,{children:[(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0 container-fluid",children:(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0 row",children:(0,r.jsxs)("div",{className:"jsx-6aa838e33a087ff0 col-12",children:[(0,r.jsxs)("nav",{className:"jsx-6aa838e33a087ff0 breadcrumb bg-transparent",children:[(0,r.jsx)("span",{className:"jsx-6aa838e33a087ff0 breadcrumb-item",children:(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-6aa838e33a087ff0 icons-home icons-size-1x5"})}),(0,r.jsx)("span",{className:"jsx-6aa838e33a087ff0 breadcrumb-item active",children:"Horaires par gare"})]}),(0,r.jsxs)("div",{className:"jsx-6aa838e33a087ff0 card border-0 shadow-sm",children:[(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0 card-header bg-primary text-white",children:(0,r.jsxs)("h1",{className:"jsx-6aa838e33a087ff0 h4 mb-0",children:[(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-6aa838e33a087ff0 icons-station icons-size-1x5 mr-2"}),"Rechercher les horaires d'une gare"]})}),(0,r.jsxs)("div",{className:"jsx-6aa838e33a087ff0 card-body",children:[(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0 text-center mb-4",children:(0,r.jsx)("p",{className:"jsx-6aa838e33a087ff0 lead mb-0",children:"Consultez les horaires des trains au d\xe9part et \xe0 l'arriv\xe9e de votre gare"})}),(0,r.jsx)(o.A,{searchQuery:l,setSearchQuery:f})]})]}),(0,r.jsxs)("div",{className:"jsx-6aa838e33a087ff0 card border-0 shadow-sm mt-4",children:[(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0 card-header bg-light",children:(0,r.jsx)("h2",{className:"jsx-6aa838e33a087ff0 h5 mb-0",children:"Gares disponibles"})}),(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0 card-body",children:s?(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0",children:"Chargement des gares..."}):0===x.length?(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0",children:"Aucune gare trouv\xe9e."}):(0,r.jsx)("ul",{className:"jsx-6aa838e33a087ff0 list-unstyled",children:x.map(e=>(0,r.jsxs)("li",{style:{display:"flex",alignItems:"center",justifyContent:"space-between"},className:"jsx-6aa838e33a087ff0",children:[(0,r.jsx)(n(),{legacyBehavior:!0,href:"/horaires-par-gare/".concat(encodeURIComponent(e.name)),children:(0,r.jsx)("a",{className:"jsx-6aa838e33a087ff0",children:e.name})}),(0,r.jsx)("button",{onClick:()=>z(e),className:"jsx-6aa838e33a087ff0 btn btn-sm btn-outline-primary",children:"D\xe9finir message"})]},e.name))})})]}),m&&(0,r.jsx)("div",{role:"dialog","aria-modal":"true","aria-labelledby":"popup-title",className:"jsx-6aa838e33a087ff0 popup-overlay",children:(0,r.jsxs)("div",{className:"jsx-6aa838e33a087ff0 popup-content",children:[(0,r.jsxs)("h3",{id:"popup-title",className:"jsx-6aa838e33a087ff0",children:["Message pour la gare: ",j.name]}),(0,r.jsx)("textarea",{rows:"4",value:h,onChange:e=>p(e.target.value),placeholder:"Entrez le message \xe0 diffuser",disabled:g,className:"jsx-6aa838e33a087ff0"}),v&&(0,r.jsx)("p",{className:"jsx-6aa838e33a087ff0 text-danger",children:v}),y&&(0,r.jsx)("p",{className:"jsx-6aa838e33a087ff0 text-success",children:y}),(0,r.jsxs)("div",{className:"jsx-6aa838e33a087ff0 popup-buttons",children:[(0,r.jsx)("button",{onClick:C,disabled:g,className:"jsx-6aa838e33a087ff0 btn btn-primary",children:g?"Enregistrement...":"Enregistrer"}),(0,r.jsx)("button",{onClick:()=>{b(!1),u(null),p(""),w(null),k(null)},disabled:g,className:"jsx-6aa838e33a087ff0 btn btn-secondary",children:"Annuler"})]})]})}),(0,r.jsxs)("div",{className:"jsx-6aa838e33a087ff0 row mt-4",children:[(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0 col-md-6",children:(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0 card border-0 shadow-sm",children:(0,r.jsxs)("div",{className:"jsx-6aa838e33a087ff0 card-body",children:[(0,r.jsxs)("h2",{className:"jsx-6aa838e33a087ff0 h5 mb-3",children:[(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-6aa838e33a087ff0 icons-info icons-size-1x5 mr-2"}),"Comment \xe7a marche ?"]}),(0,r.jsxs)("ol",{className:"jsx-6aa838e33a087ff0 pl-3",children:[(0,r.jsx)("li",{className:"jsx-6aa838e33a087ff0 mb-2",children:"Saisissez le nom de votre gare dans le champ de recherche"}),(0,r.jsx)("li",{className:"jsx-6aa838e33a087ff0 mb-2",children:"S\xe9lectionnez votre gare dans la liste des suggestions"}),(0,r.jsx)("li",{className:"jsx-6aa838e33a087ff0",children:"Consultez les horaires des trains au d\xe9part et \xe0 l'arriv\xe9e"})]})]})})}),(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0 col-md-6",children:(0,r.jsx)("div",{className:"jsx-6aa838e33a087ff0 card border-0 shadow-sm",children:(0,r.jsxs)("div",{className:"jsx-6aa838e33a087ff0 card-body",children:[(0,r.jsxs)("h2",{className:"jsx-6aa838e33a087ff0 h5 mb-3",children:[(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-6aa838e33a087ff0 icons-calendar icons-size-1x5 mr-2"}),"Informations disponibles"]}),(0,r.jsxs)("ul",{className:"jsx-6aa838e33a087ff0 list-unstyled",children:[(0,r.jsxs)("li",{className:"jsx-6aa838e33a087ff0 mb-2",children:[(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-6aa838e33a087ff0 icons-clock-forward mr-2"}),"Horaires des d\xe9parts"]}),(0,r.jsxs)("li",{className:"jsx-6aa838e33a087ff0 mb-2",children:[(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-6aa838e33a087ff0 icons-clock-back mr-2"}),"Horaires des arriv\xe9es"]}),(0,r.jsxs)("li",{className:"jsx-6aa838e33a087ff0 mb-2",children:[(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-6aa838e33a087ff0 icons-calendar-ticket mr-2"}),"Jours de circulation"]}),(0,r.jsxs)("li",{className:"jsx-6aa838e33a087ff0",children:[(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-6aa838e33a087ff0 icons-info mr-2"}),"Informations sur les trains"]})]})]})})})]})]})})}),(0,r.jsx)(t(),{id:"6aa838e33a087ff0",children:".card.jsx-6aa838e33a087ff0{-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.card-header.jsx-6aa838e33a087ff0{-webkit-border-top-left-radius:8px;-moz-border-radius-topleft:8px;border-top-left-radius:8px;-webkit-border-top-right-radius:8px;-moz-border-radius-topright:8px;border-top-right-radius:8px}.lead.jsx-6aa838e33a087ff0{color:#666}.icons-size-1x5.jsx-6aa838e33a087ff0{font-size:1.5rem;vertical-align:middle}.breadcrumb.jsx-6aa838e33a087ff0{padding:1rem 0}.list-unstyled.jsx-6aa838e33a087ff0 li.jsx-6aa838e33a087ff0{color:#495057;margin-bottom:.5rem}.list-unstyled.jsx-6aa838e33a087ff0 li.jsx-6aa838e33a087ff0 a.jsx-6aa838e33a087ff0{color:#007bff;text-decoration:none}.list-unstyled.jsx-6aa838e33a087ff0 li.jsx-6aa838e33a087ff0 a.jsx-6aa838e33a087ff0:hover{text-decoration:underline}.list-unstyled.jsx-6aa838e33a087ff0 i.jsx-6aa838e33a087ff0{color:#004}ol.jsx-6aa838e33a087ff0{color:#495057}.card-body.jsx-6aa838e33a087ff0{padding:2rem}"})]})}},207:(e,a,s)=>{"use strict";s.d(a,{A:()=>c});var r=s(7876),i=s(5448);s(7328);var t=s(6790);function c(e){let{children:a,darkMode:s,toggleDarkMode:c}=e;return(0,r.jsxs)("div",{className:"main-wrapper d-flex flex-column min-vh-100",children:[(0,r.jsx)(i.A,{darkMode:s,toggleDarkMode:c}),(0,r.jsx)("main",{className:"main-container flex-grow-1",children:(0,r.jsx)("div",{className:"container-fluid",children:a})}),(0,r.jsx)(t.A,{})]})}},3874:(e,a,s)=>{"use strict";s.d(a,{A:()=>d});var r=s(7876),i=s(4250),t=s.n(i),c=s(4232),l=s(9099);let n=()=>JSON.parse(localStorage.getItem("stations")||"[]");function d(e){let{searchQuery:a,setSearchQuery:s}=e,[i,d]=(0,c.useState)([]),[o,f]=(0,c.useState)(!1),[x,m]=(0,c.useState)(-1),b=(0,l.useRouter)(),j=(0,c.useRef)(null);(0,c.useEffect)(()=>{let e=e=>{j.current&&!j.current.contains(e.target)&&f(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);let u=e=>{s(e),f(!1),b.push("/horaires-par-gare/".concat(encodeURIComponent(e)))};return(0,r.jsxs)("div",{ref:j,className:"jsx-9c78709bb41de5fc station-search",children:[(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a&&b.push("/horaires-par-gare/".concat(encodeURIComponent(a)))},className:"jsx-9c78709bb41de5fc d-flex align-items-center",children:[(0,r.jsxs)("div",{className:"jsx-9c78709bb41de5fc form-control-container w-100",children:[(0,r.jsx)("label",{htmlFor:"station",className:"jsx-9c78709bb41de5fc form-label",children:"Rechercher une gare"}),(0,r.jsxs)("div",{className:"jsx-9c78709bb41de5fc input-group",children:[(0,r.jsx)("div",{className:"jsx-9c78709bb41de5fc input-group-prepend",children:(0,r.jsx)("span",{className:"jsx-9c78709bb41de5fc input-group-text",children:(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-9c78709bb41de5fc icons-search"})})}),(0,r.jsx)("input",{type:"text",id:"station",value:a,onChange:e=>{let a=e.target.value;s(a),a.length>=2?(d(n().filter(e=>e.name.toLowerCase().includes(a.toLowerCase())).slice(0,5)),f(!0)):(d([]),f(!1)),m(-1)},onKeyDown:e=>{"ArrowDown"===e.key?(e.preventDefault(),m(e=>e<i.length-1?e+1:e)):"ArrowUp"===e.key?(e.preventDefault(),m(e=>e>0?e-1:e)):"Enter"===e.key&&x>=0&&(e.preventDefault(),u(i[x].name))},placeholder:"Saisissez le nom d'une gare...",autoComplete:"off","aria-label":"Rechercher une gare",className:"jsx-9c78709bb41de5fc form-control"})]}),o&&i.length>0&&(0,r.jsx)("div",{className:"jsx-9c78709bb41de5fc suggestions-container",children:(0,r.jsx)("div",{className:"jsx-9c78709bb41de5fc list-group",children:i.map((e,a)=>(0,r.jsxs)("button",{type:"button",onClick:()=>u(e.name),className:"jsx-9c78709bb41de5fc "+"list-group-item list-group-item-action ".concat(a===x?"active":""),children:[(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-9c78709bb41de5fc icons-station icons-size-1x5 mr-2"}),e.name,e.categories&&e.categories.length>0&&(0,r.jsx)("div",{className:"jsx-9c78709bb41de5fc station-categories",children:e.categories.map(e=>(0,r.jsx)("span",{className:"jsx-9c78709bb41de5fc badge badge-light ml-1",children:e},e))})]},e.name))})})]}),(0,r.jsxs)("button",{type:"submit",className:"jsx-9c78709bb41de5fc btn btn-primary ml-3",children:[(0,r.jsx)("i",{"aria-hidden":"true",className:"jsx-9c78709bb41de5fc icons-search icons-size-1x5"}),(0,r.jsx)("span",{className:"jsx-9c78709bb41de5fc ml-2",children:"Rechercher"})]})]}),(0,r.jsx)(t(),{id:"9c78709bb41de5fc",children:".station-search.jsx-9c78709bb41de5fc{position:relative;width:100%;max-width:600px;margin:0 auto}.suggestions-container.jsx-9c78709bb41de5fc{position:absolute;top:100%;left:0;right:0;z-index:1000;margin-top:.5rem;background:white;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;-webkit-box-shadow:0 2px 4px rgba(0,0,0,.1);-moz-box-shadow:0 2px 4px rgba(0,0,0,.1);box-shadow:0 2px 4px rgba(0,0,0,.1)}.list-group-item.jsx-9c78709bb41de5fc{border-left:none;border-right:none;-webkit-border-radius:0;-moz-border-radius:0;border-radius:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:.75rem 1rem}.list-group-item.jsx-9c78709bb41de5fc:first-child{-webkit-border-top-left-radius:4px;-moz-border-radius-topleft:4px;border-top-left-radius:4px;-webkit-border-top-right-radius:4px;-moz-border-radius-topright:4px;border-top-right-radius:4px}.list-group-item.jsx-9c78709bb41de5fc:last-child{-webkit-border-bottom-left-radius:4px;-moz-border-radius-bottomleft:4px;border-bottom-left-radius:4px;-webkit-border-bottom-right-radius:4px;-moz-border-radius-bottomright:4px;border-bottom-right-radius:4px}.list-group-item.active.jsx-9c78709bb41de5fc{background-color:#f8f9fa;border-color:#ddd;color:#000}.input-group-text.jsx-9c78709bb41de5fc{background-color:white;border-right:none}.form-control.jsx-9c78709bb41de5fc{border-left:none}.form-control.jsx-9c78709bb41de5fc:focus{-webkit-box-shadow:none;-moz-box-shadow:none;box-shadow:none;border-color:#ddd}.input-group-text.jsx-9c78709bb41de5fc i.jsx-9c78709bb41de5fc{color:#666}.station-categories.jsx-9c78709bb41de5fc{margin-left:auto;font-size:.875rem}.badge.jsx-9c78709bb41de5fc{font-weight:normal}.icons-size-1x5.jsx-9c78709bb41de5fc{font-size:1.5rem;vertical-align:middle}"})]})}},6513:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/horaires-par-gare",function(){return s(41)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[8585,8230,4587,1843,327,636,6593,8792],()=>a(6513)),_N_E=e.O()}]);