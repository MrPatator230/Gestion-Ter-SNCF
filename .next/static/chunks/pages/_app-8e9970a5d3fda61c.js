(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{1672:()=>{},1754:()=>{},2149:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d});var n=r(7876);r(1754),r(6048),r(1672),r(4232);var s=r(7328),o=r.n(s),a=r(9099),i=r(2507),c=r(4613),l=r(3561);function u(e){let{children:t}=e;return t}function d(e){let{Component:t,pageProps:r}=e;return(0,a.useRouter)().pathname.startsWith("/afficheurs"),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(o(),{children:[(0,n.jsx)("title",{children:"TER Ferrovia Bourgogne - Franche-Comt\xe9"}),(0,n.jsx)("meta",{name:"description",content:"Gestion des horaires et services TER"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,n.jsx)(c.O,{children:(0,n.jsx)(i.Z,{children:(0,n.jsx)(l.W,{children:(0,n.jsx)("div",{className:"",children:(0,n.jsx)(u,{children:(0,n.jsx)(t,{...r})})})})})})]})}},2507:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a,l:()=>o});var n=r(7876),s=r(4232);let o=(0,s.createContext)(),a=e=>{let{children:t}=e,[r,a]=(0,s.useState)("Ma Soci\xe9t\xe9 Ferroviaire"),[i,c]=(0,s.useState)("Le transport ferroviaire simplifi\xe9"),[l,u]=(0,s.useState)("Description de la soci\xe9t\xe9 ferroviaire..."),[d,f]=(0,s.useState)("#007bff"),[m,h]=(0,s.useState)("#6c757d"),[g,p]=(0,s.useState)("#28a745"),[v,y]=(0,s.useState)("Train Schedule Management"),[S,_]=(0,s.useState)("/images/logo-ter-mobigo.svg"),[j,x]=(0,s.useState)("/favicon.ico"),[k,w]=(0,s.useState)("Inter"),[E,T]=(0,s.useState)("rounded"),[P,b]=(0,s.useState)("default"),[C,N]=(0,s.useState)("\xa9 2024 Ma Soci\xe9t\xe9 Ferroviaire"),[O,F]=(0,s.useState)([]),[A,I]=(0,s.useState)(""),[M,R]=(0,s.useState)(2);return(0,s.useEffect)(()=>{!async function(){try{let e=await fetch("/api/entreprise");if(e.ok){let t=await e.json(),r=t.entrepriseSettings||{};a(r.company_name||"Ma Soci\xe9t\xe9 Ferroviaire"),c(r.company_slogan||"Le transport ferroviaire simplifi\xe9"),u(r.company_description||"Description de la soci\xe9t\xe9 ferroviaire..."),f(r.primary_color||"#007bff"),h(r.secondary_color||"#6c757d"),p(r.accent_color||"#28a745"),y(r.app_name||"Train Schedule Management"),_(r.logo_url||"/images/logo-ter-mobigo.svg"),x(r.favicon_url||"/favicon.ico"),w(r.font_family||"Inter"),T(r.button_style||"rounded"),b(r.header_style||"default"),N(r.footer_content||"\xa9 2024 Ma Soci\xe9t\xe9 Ferroviaire"),F(t.footerRegions||[]),I(r.custom_css||""),R(void 0!==r.served_stations_lines?r.served_stations_lines:2)}}catch(e){console.error("Failed to fetch settings:",e)}}()},[]),(0,s.useEffect)(()=>{let e=document.documentElement;e.style.setProperty("--primary-color",d),e.style.setProperty("--secondary-color",m),e.style.setProperty("--accent-color",g),e.style.setProperty("--font-family",k);let t=document.getElementById("custom-styles");t||((t=document.createElement("style")).id="custom-styles",document.head.appendChild(t)),t.textContent=A},[d,m,g,k,A]),(0,n.jsx)(o.Provider,{value:{companyName:r,setCompanyName:a,companySlogan:i,setCompanySlogan:c,companyDescription:l,setCompanyDescription:u,primaryColor:d,setPrimaryColor:f,secondaryColor:m,setSecondaryColor:h,accentColor:g,setAccentColor:p,appName:v,setAppName:y,logoUrl:S,setLogoUrl:_,faviconUrl:j,setFaviconUrl:x,fontFamily:k,setFontFamily:w,buttonStyle:E,setButtonStyle:T,headerStyle:P,setHeaderStyle:b,footerContent:C,setFooterContent:N,footerRegions:O,setFooterRegions:F,customCss:A,setCustomCss:I,servedStationsLines:M,setServedStationsLines:R},children:t})}},3561:(e,t,r)=>{"use strict";r.d(t,{N:()=>i,W:()=>a});var n=r(7876),s=r(4232);let o=(0,s.createContext)();function a(e){let{children:t}=e,[r,a]=(0,s.useState)({});return(0,s.useEffect)(()=>{let e=async()=>{try{let e=await fetch("/api/track-assignments");if(!e.ok)throw Error("Failed to fetch track assignments");let t=await e.json();a(t)}catch(e){console.error("Error fetching track assignments:",e),a({})}};e();let t=setInterval(e,1e4);return()=>clearInterval(t)},[]),(0,n.jsx)(o.Provider,{value:{trackAssignments:r,updateTrackAssignment:(e,t,r)=>{a(n=>{let s={...n,[e]:{...n[e]||{},[t]:r}};return localStorage.setItem("trackAssignments",JSON.stringify(s)),s})},removeTrackAssignment:(e,t)=>{a(r=>{let n={...r};return n[e]&&(delete n[e][t],0===Object.keys(n[e]).length&&delete n[e]),localStorage.setItem("trackAssignments",JSON.stringify(n)),n})},clearTrackAssignments:()=>{a({}),localStorage.removeItem("trackAssignments")}},children:t})}function i(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useTrackAssignments must be used within a TrackAssignmentProvider");return e}},4613:(e,t,r)=>{"use strict";r.d(t,{O:()=>a,c:()=>o});var n=r(7876),s=r(4232);let o=(0,s.createContext)();function a(e){let{children:t}=e,[r,a]=(0,s.useState)(!1),[i,c]=(0,s.useState)(null),[l,u]=(0,s.useState)(null),d=async(e,t)=>{try{let r=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(!r.ok)return!1;let n=await r.json();return a(!0),c(n.user.role),u(n.user),!0}catch(e){return console.error("Login error:",e),!1}},f=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";try{let o=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t,name:r,email:n,phone:s})});if(!o.ok)return!1;return await o.json(),a(!0),c("client"),u({username:e,role:"client",name:r,email:n,phone:s}),!0}catch(e){return console.error("Registration error:",e),!1}};return(0,n.jsx)(o.Provider,{value:{isAuthenticated:r,role:i,user:l,setUser:u,login:d,logout:()=>{a(!1),c(null),u(null)},register:f},children:t})}},6048:()=>{},6556:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return r(2149)}])},7328:(e,t,r)=>{e.exports=r(9836)},9099:(e,t,r)=>{e.exports=r(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[6593,8792],()=>(t(6556),t(8253))),_N_E=e.O()}]);