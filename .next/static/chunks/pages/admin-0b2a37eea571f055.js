(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6309],{757:(e,a,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(2959)}])},2959:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>v});var i=s(7876),c=s(4250),n=s.n(c),t=s(4232),r=s(9099);s(8230);var d=s(4587),o=s.n(d),l=s(4613),m=s(2507),f=s(3779);function x(){let[e,a]=(0,t.useState)(!1);return(0,i.jsx)("button",{className:"sncf-mobile-toggle d-md-none",onClick:()=>{document.querySelector(".sncf-sidebar").classList.toggle("show"),a(!e)},"aria-label":"Toggle menu",children:(0,i.jsx)("span",{className:"material-icons",children:e?"close":"menu"})})}var h=s(9062);function b(e){let{title:a,value:s,icon:c,color:t="#007bff",onClick:r}=e;return(0,i.jsxs)(h.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"cursor-pointer w-100",onClick:r,style:{cursor:r?"pointer":"default"},children:[(0,i.jsx)("div",{className:"jsx-3718785c156ac5a4 p-3",children:(0,i.jsxs)("div",{className:"jsx-3718785c156ac5a4 d-flex justify-content-between align-items-center",children:[(0,i.jsxs)("div",{className:"jsx-3718785c156ac5a4",children:[(0,i.jsx)("div",{className:"jsx-3718785c156ac5a4 text-muted small text-uppercase mb-1",children:a}),(0,i.jsx)("div",{className:"jsx-3718785c156ac5a4 h3 mb-0 fw-bold",children:s})]}),(0,i.jsx)("div",{style:{backgroundColor:t,width:"60px",height:"60px"},className:"jsx-3718785c156ac5a4 rounded-circle p-3 d-flex align-items-center justify-content-center",children:(0,i.jsx)("span",{style:{fontSize:"2rem"},className:"jsx-3718785c156ac5a4 material-icons text-white",children:c})})]})}),(0,i.jsx)(n(),{id:"3718785c156ac5a4",children:".cursor-pointer.jsx-3718785c156ac5a4:hover{-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px);-webkit-transition:-webkit-transform.2s ease;-moz-transition:-moz-transform.2s ease;-o-transition:-o-transform.2s ease;transition:-webkit-transform.2s ease;transition:-moz-transform.2s ease;transition:-o-transform.2s ease;transition:transform.2s ease}"})]})}function u(e){let{stats:a,primaryColor:s}=e;return(0,i.jsxs)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" h-100",children:[(0,i.jsxs)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" d-flex justify-content-between align-items-center mb-4",children:[(0,i.jsx)("h5",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" mb-0",children:"Statistiques R\xe9centes"}),(0,i.jsxs)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" dropdown",children:[(0,i.jsx)("button",{type:"button","data-bs-toggle":"dropdown",style:{color:s},className:n().dynamic([["7c7da7427feea250",[s,s]]])+" btn btn-link p-0",children:(0,i.jsx)("span",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" material-icons",children:"more_vert"})}),(0,i.jsxs)("ul",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" dropdown-menu dropdown-menu-end",children:[(0,i.jsx)("li",{className:n().dynamic([["7c7da7427feea250",[s,s]]]),children:(0,i.jsx)("button",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" dropdown-item",children:"Aujourd'hui"})}),(0,i.jsx)("li",{className:n().dynamic([["7c7da7427feea250",[s,s]]]),children:(0,i.jsx)("button",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" dropdown-item",children:"Cette semaine"})}),(0,i.jsx)("li",{className:n().dynamic([["7c7da7427feea250",[s,s]]]),children:(0,i.jsx)("button",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" dropdown-item",children:"Ce mois"})})]})]})]}),(0,i.jsx)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" row g-4",children:a.map((e,a)=>(0,i.jsx)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" col-md-6",children:(0,i.jsxs)(h.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},className:"p-3 rounded-3 bg-white shadow-sm h-100",style:{border:"1px solid rgba(0,0,0,0.05)"},children:[(0,i.jsxs)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" d-flex align-items-center mb-3",children:[(0,i.jsx)("div",{style:{backgroundColor:"".concat(s,"15"),width:"40px",height:"40px"},className:n().dynamic([["7c7da7427feea250",[s,s]]])+" rounded-circle p-2 me-3 d-flex align-items-center justify-content-center",children:(0,i.jsx)("span",{style:{color:s,fontSize:"1.25rem"},className:n().dynamic([["7c7da7427feea250",[s,s]]])+" material-icons",children:e.icon})}),(0,i.jsx)("h6",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" mb-0 text-muted",children:e.title})]}),(0,i.jsxs)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" d-flex justify-content-between align-items-end",children:[(0,i.jsxs)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]]),children:[(0,i.jsx)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" h3 mb-0 fw-bold",children:e.value}),e.subtitle&&(0,i.jsx)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" text-muted small mt-1",children:e.subtitle})]}),e.change&&(0,i.jsxs)("div",{className:n().dynamic([["7c7da7427feea250",[s,s]]])+" "+"small d-flex align-items-center ".concat(e.change>0?"text-success":"text-danger"),children:[(0,i.jsx)("span",{style:{fontSize:"1rem"},className:n().dynamic([["7c7da7427feea250",[s,s]]])+" material-icons me-1",children:e.change>0?"trending_up":"trending_down"}),Math.abs(e.change),"%"]})]})]})},a))}),(0,i.jsx)(n(),{id:"7c7da7427feea250",dynamic:[s,s],children:".dropdown-item.__jsx-style-dynamic-selector:hover{background-color:".concat(s,"15;color:").concat(s,"}")})]})}function y(e){let{activities:a,primaryColor:s}=e;return(0,i.jsxs)("div",{className:"jsx-192a2fee65105185 h-100",children:[(0,i.jsxs)("div",{className:"jsx-192a2fee65105185 d-flex justify-content-between align-items-center mb-4",children:[(0,i.jsx)("h5",{className:"jsx-192a2fee65105185 mb-0",children:"Activit\xe9s R\xe9centes"}),(0,i.jsx)("button",{type:"button",style:{color:s},className:"jsx-192a2fee65105185 btn btn-link p-0",children:(0,i.jsx)("span",{className:"jsx-192a2fee65105185 material-icons",children:"refresh"})})]}),(0,i.jsx)("div",{className:"jsx-192a2fee65105185 activity-timeline",children:a.map((e,c)=>(0,i.jsxs)(h.P.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*c},className:"activity-item position-relative mb-4 ps-4",children:[(0,i.jsx)("div",{style:{backgroundColor:"".concat(s,"15"),width:"32px",height:"32px",top:"0"},className:"jsx-192a2fee65105185 activity-icon position-absolute start-0 rounded-circle d-flex align-items-center justify-content-center",children:(0,i.jsx)("span",{style:{color:s,fontSize:"1rem"},className:"jsx-192a2fee65105185 material-icons",children:e.icon})}),(0,i.jsxs)("div",{className:"jsx-192a2fee65105185 activity-content",children:[(0,i.jsx)("h6",{className:"jsx-192a2fee65105185 mb-1 fs-6 fw-semibold",children:e.title}),(0,i.jsx)("p",{className:"jsx-192a2fee65105185 mb-1 text-muted small",children:e.description}),(0,i.jsx)("small",{style:{fontSize:"0.75rem"},className:"jsx-192a2fee65105185 text-muted d-block",children:e.time})]}),c<a.length-1&&(0,i.jsx)("div",{style:{width:"2px",backgroundColor:"".concat(s,"15"),left:"15px",top:"32px",bottom:"-24px"},className:"jsx-192a2fee65105185 activity-line position-absolute"})]},c))}),(0,i.jsx)(n(),{id:"192a2fee65105185",children:".activity-timeline.jsx-192a2fee65105185{position:relative;padding-bottom:1rem}.activity-item.jsx-192a2fee65105185{position:relative}.activity-content.jsx-192a2fee65105185{background-color:white;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;padding:1rem;border:1px solid rgba(0,0,0,.05);margin-left:.5rem;-webkit-box-shadow:0 1px 3px rgba(0,0,0,.05);-moz-box-shadow:0 1px 3px rgba(0,0,0,.05);box-shadow:0 1px 3px rgba(0,0,0,.05)}.activity-icon.jsx-192a2fee65105185{z-index:1;background-color:white}"})]})}var p=s(3390),j=s.n(p);function v(){let{isAuthenticated:e}=(0,t.useContext)(l.c),{logoUrl:a,appName:s,companyName:c,primaryColor:d,secondaryColor:h,buttonStyle:p}=(0,t.useContext)(m.l),v=(0,r.useRouter)(),[N,g]=(0,t.useState)(0),[w,_]=(0,t.useState)(0),[k,C]=(0,t.useState)(null),[T,z]=(0,t.useState)([]);return((0,t.useEffect)(()=>{!1===e&&v.push("/admin/login")},[e,v]),(0,t.useEffect)(()=>{!async function(){try{let e=await fetch("/api/admin/dashboard");if(!e.ok)throw Error("Failed to fetch dashboard data");let a=await e.json();g(a.stationCount),_(a.scheduleCount),C(a.onTimeRatio),z(a.activities)}catch(e){console.error("Error fetching dashboard data:",e)}}()},[]),e)?(0,i.jsxs)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" "+"app-container ".concat((e=>{var a;if(!e)return"";let s=null==(a=e.split("logo-ter-")[1])?void 0:a.split(".")[0];return s?j()["".concat(s,"Theme")]:""})(a)),children:[(0,i.jsx)(f.A,{}),(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" d-flex",children:(0,i.jsxs)("main",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" flex-grow-1 min-vh-100 bg-light",children:[(0,i.jsx)("header",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" bg-white shadow-sm mb-4 px-4 py-3",children:(0,i.jsxs)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" d-flex justify-content-between align-items-center",children:[(0,i.jsxs)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" d-flex align-items-center",children:[(0,i.jsx)(x,{}),(0,i.jsx)("h1",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" h3 mb-0 ms-3",children:"Tableau de bord"})]}),(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" d-flex align-items-center",children:(0,i.jsx)(o(),{src:a||"/images/sncf-logo.png",alt:s||"SNCF",width:120,height:40,className:"me-3"})})]})}),(0,i.jsxs)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" container-fluid px-4",children:[(0,i.jsxs)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" row g-4 mb-4",children:[(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" col-xl-3 col-md-6",children:(0,i.jsx)("div",{style:{borderRadius:"rounded"===p?"15px":"4px"},className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card border-0 shadow-sm h-100",children:(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card-body",children:(0,i.jsx)(b,{title:"Nombre de gares",value:N,icon:"train",color:d,onClick:()=>v.push("/stations")})})})}),(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" col-xl-3 col-md-6",children:(0,i.jsx)("div",{style:{borderRadius:"rounded"===p?"15px":"4px"},className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card border-0 shadow-sm h-100",children:(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card-body",children:(0,i.jsx)(b,{title:"Horaires cr\xe9\xe9s",value:w,icon:"schedule",color:d,onClick:()=>v.push("/admin/horaires")})})})}),(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" col-xl-3 col-md-6",children:(0,i.jsx)("div",{style:{borderRadius:"rounded"===p?"15px":"4px"},className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card border-0 shadow-sm h-100",children:(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card-body",children:(0,i.jsx)(b,{title:"Ratio de ponctualit\xe9",value:"".concat(k||0,"%"),icon:"verified",color:d})})})}),(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" col-xl-3 col-md-6",children:(0,i.jsx)("div",{style:{borderRadius:"rounded"===p?"15px":"4px"},className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card border-0 shadow-sm h-100",children:(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card-body",children:(0,i.jsx)(b,{title:"Syst\xe8me d'annonces",value:"Acc\xe9der",icon:"campaign",color:d,onClick:()=>v.push("/admin/banque-de-sons")})})})}),(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" col-xl-3 col-md-6",children:(0,i.jsx)("div",{style:{borderRadius:"rounded"===p?"15px":"4px"},className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card border-0 shadow-sm h-100",children:(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card-body",children:(0,i.jsx)(b,{title:"Affichage Voyageurs",value:"Acc\xe9der",icon:"schedule",color:d,onClick:()=>v.push("/admin/affichage-voyageurs")})})})})]}),(0,i.jsxs)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" row g-4",children:[(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" col-lg-8",children:(0,i.jsx)("div",{style:{borderRadius:"rounded"===p?"15px":"4px"},className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card border-0 shadow-sm",children:(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card-body",children:(0,i.jsx)(u,{stats:[{title:"Trafic Journalier",value:"2,547",icon:"trending_up",color:"success",change:12,subtitle:"Trains en circulation aujourd'hui"},{title:"Ponctualit\xe9",value:"96%",icon:"timer",color:"primary",change:3,subtitle:"Moyenne sur les 30 derniers jours"},{title:"Annonces Diffus\xe9es",value:"1,286",icon:"campaign",color:"info",change:8,subtitle:"Derni\xe8res 24 heures"},{title:"Alertes Actives",value:"3",icon:"warning",color:"warning",change:-25,subtitle:"Perturbations en cours"}],primaryColor:d})})})}),(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" col-lg-4",children:(0,i.jsx)("div",{style:{borderRadius:"rounded"===p?"15px":"4px"},className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card border-0 shadow-sm",children:(0,i.jsx)("div",{className:n().dynamic([["1ffb803d1a3fe783",[h,d,d,d,d]]])+" card-body",children:(0,i.jsx)(y,{activities:T,primaryColor:d})})})})]})]})]})}),(0,i.jsx)(n(),{id:"1ffb803d1a3fe783",dynamic:[h,d,d,d,d],children:".app-container.__jsx-style-dynamic-selector{min-height:100vh;background-color:#f8f9fa}.card.__jsx-style-dynamic-selector{-webkit-transition:-webkit-transform.2s;-moz-transition:-moz-transform.2s;-o-transition:-o-transform.2s;transition:-webkit-transform.2s;transition:-moz-transform.2s;transition:-o-transform.2s;transition:transform.2s}.card.__jsx-style-dynamic-selector:hover{-webkit-transform:translatey(-5px);-moz-transform:translatey(-5px);-ms-transform:translatey(-5px);-o-transform:translatey(-5px);transform:translatey(-5px)}.nav-link{color:".concat(h,"}.nav-link.active{color:").concat(d,"}.btn-primary{background-color:").concat(d,";border-color:").concat(d,"}.text-primary{color:").concat(d,"!important}")})]}):null}},3390:e=>{e.exports={auraTheme:"operatorColors_auraTheme__d_Qhq",bretagneTheme:"operatorColors_bretagneTheme__z_kxX",centreTheme:"operatorColors_centreTheme__YwafM",grandEstTheme:"operatorColors_grandEstTheme___Hfnp",hdfTheme:"operatorColors_hdfTheme__8vks2",mobigoTheme:"operatorColors_mobigoTheme___hcsh",normandieTheme:"operatorColors_normandieTheme__CffTl",nouvelleAquitaineTheme:"operatorColors_nouvelleAquitaineTheme__gN9v3",occitanieTheme:"operatorColors_occitanieTheme__Pm9nM",pacaTheme:"operatorColors_pacaTheme__Z9abg",pddlTheme:"operatorColors_pddlTheme__8Dszb"}}},e=>{var a=a=>e(e.s=a);e.O(0,[8230,4587,3183,3779,636,6593,8792],()=>a(757)),_N_E=e.O()}]);