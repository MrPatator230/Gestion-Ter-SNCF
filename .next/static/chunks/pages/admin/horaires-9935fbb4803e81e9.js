(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1925],{642:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>d});var r=i(7876),n=i(4232),s=i(9099),a=i(3779),l=i(4613),o=i(7180);let c=[{label:"Lundi",value:"Monday"},{label:"Mardi",value:"Tuesday"},{label:"Mercredi",value:"Wednesday"},{label:"Jeudi",value:"Thursday"},{label:"Vendredi",value:"Friday"},{label:"Samedi",value:"Saturday"},{label:"Dimanche",value:"Sunday"}];function d(){let{role:e,isAuthenticated:t}=(0,n.useContext)(l.c),i=(0,s.useRouter)(),[d,m]=(0,n.useState)([]),[u,h]=(0,n.useState)([]),[p,f]=(0,n.useState)({}),[x,b]=(0,n.useState)(null),[y,v]=(0,n.useState)([]),[g,j]=(0,n.useState)([]),[_,S]=(0,n.useState)([]),[N,k]=(0,n.useState)([]),[w,C]=(0,n.useState)(!1),[T,z]=(0,n.useState)(null),[F,R]=(0,n.useState)(!1),[A,E]=(0,n.useState)(null),[D,O]=(0,n.useState)(""),[I,P]=(0,n.useState)(""),[H,M]=(0,n.useState)(""),[G,q]=(0,n.useState)(""),[J,B]=(0,n.useState)(""),[L,Y]=(0,n.useState)(""),[U,V]=(0,n.useState)([{name:"",arrivalTime:"",departureTime:""}]),[W,X]=(0,n.useState)([]),[K,Q]=(0,n.useState)(null);(0,n.useEffect)(()=>{t&&"admin"===e||i.push("/login")},[t,e,i]),(0,n.useEffect)(()=>{!async function(){try{let[e,t,i,r,n,s,a]=await Promise.all([fetch("/api/schedules"),fetch("/api/gestion-horaires"),fetch("/api/schedule-folders"),fetch("/api/stations"),fetch("/api/materiels-roulants"),fetch("/api/train-types"),fetch("/api/schedule-folder-map")]),l=[],o=[],c=[];e.ok&&(l=await e.json()),t.ok&&(o=await t.json()),a.ok&&(c=await a.json());let d=l.map(e=>({id:e.id,trainNumber:e.train_number,departureStation:e.departure_station,arrivalStation:e.arrival_station,arrivalTime:e.arrival_time,departureTime:e.departure_time,trainType:e.train_type,rollingStockFileName:e.rolling_stock_file_name,composition:e.composition,joursCirculation:e.jours_circulation,servedStations:e.served_stations,createdAt:e.created_at,updatedAt:e.updated_at,delayMinutes:0,isCancelled:!1,trackAssignments:{}})),u={};Array.isArray(o)?o.forEach(e=>{u[e.schedule_id]=e}):console.warn("gestion-horaires API returned non-array statusData:",o);let p=d.map(e=>{let t=u[e.id];return t?{...e,delayMinutes:t.delay_minutes,isCancelled:t.is_cancelled,trackAssignments:t.track_assignments||{}}:e});if(m(p),k(p.map(e=>e.id)),i.ok){let e=await i.json();h(e)}if(r.ok){let e=await r.json();v(e)}if(n.ok){let e=await n.json();j(e)}if(s.ok){let e=(await s.json()).map(e=>e.type_name);S(e),e.length>0&&Y(e[0])}let x={};c.forEach(e=>{x[e.schedule_id]=e.folder_id}),f(x)}catch(e){console.error("Failed to fetch data:",e)}}()},[]);let Z=async e=>{h(e)},$=async e=>{f(e)},ee=async e=>{v(e)},et=async()=>{let e=prompt("Nom du nouveau dossier:");if(e&&""!==e.trim())try{let t=await fetch("/api/schedule-folders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e.trim()})});if(t.ok){let e=await t.json();Z([...u,e])}else alert("Erreur lors de la cr\xe9ation du dossier.")}catch(e){console.error("Error creating folder:",e),alert("Erreur lors de la cr\xe9ation du dossier.")}},ei=()=>{C(!1),E(null),Q(null),O(""),P(""),M(""),q(""),B(""),Y(""),V([{name:"",arrivalTime:"",departureTime:""}]),X([])},er=e=>{W.includes(e)?X(W.filter(t=>t!==e)):X([...W,e])},en=async e=>{if(e.preventDefault(),!D||!I||!H||!G||!J||!L||!W||0===W.length)return void alert("Veuillez remplir tous les champs obligatoires, y compris les jours de circulation.");let t=U.filter(e=>""!==e.name.trim()&&e.name!==I&&e.name!==H),i=[...y];t.forEach(e=>{i.find(t=>t.name===e.name)||i.push({name:e.name,categories:[]})}),I&&!i.find(e=>e.name===I)&&i.push({name:I,categories:[]}),H&&!i.find(e=>e.name===H)&&i.push({name:H,categories:[]}),await ee(i);let r={trainNumber:D,departureStation:I,arrivalStation:H,arrivalTime:G,departureTime:J,trainType:L,rollingStockFileName:null,composition:(null==A?void 0:A.composition)||[],servedStations:t,joursCirculation:W};try{if(A){if(!(await fetch("/api/schedules/".concat(A.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)return void alert("Erreur lors de la mise \xe0 jour de l'horaire.");m(d.map(e=>e.id===A.id?{...e,...r}:e))}else{let e=await fetch("/api/schedules",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!e.ok)return void alert("Erreur lors de la cr\xe9ation de l'horaire.");let t=await e.json();if(m([...d,{id:t.id,...r}]),k(e=>e.length>0?[...e,t.id]:[t.id]),K){let e={...p,[t.id]:K};await $(e)}}}catch(e){console.error("Error saving schedule:",e),alert("Erreur lors de la sauvegarde de l'horaire.")}ei()},es=async(e,t)=>{e.preventDefault();let i=e.dataTransfer.getData("scheduleId");if(!i)return;let r={...p,[i]:t};await $(r),f(r)},ea=e=>{e.preventDefault()},el=e=>d.filter(t=>p[t.id]===e),eo=x?el(x):d,ec=eo.reduce((e,t)=>(e[t.id]=t,e),{}),ed=N.length>0?N.map(e=>ec[e]).filter(Boolean):eo;return(0,r.jsxs)("div",{id:"wrapper",style:{display:"flex",minHeight:"100vh"},children:[(0,r.jsx)("div",{style:{height:"100vh",overflowY:"auto"},children:(0,r.jsx)(a.A,{})}),(0,r.jsx)("div",{id:"content-wrapper",className:"d-flex flex-column flex-grow-1",children:(0,r.jsxs)("div",{id:"content",className:"container mt-4 flex-grow-1",children:[(0,r.jsx)("h1",{children:"Gestion des horaires de trains"}),(0,r.jsxs)("div",{className:"d-flex mb-3",children:[(0,r.jsx)("button",{className:"btn btn-primary me-3",onClick:()=>{C(!0)},children:"Cr\xe9er un horaire"}),(0,r.jsx)("button",{className:"btn btn-secondary",onClick:et,children:"Cr\xe9er un dossier"})]}),(0,r.jsxs)("div",{className:"d-flex",children:[(0,r.jsxs)("div",{style:{flexBasis:"25%",minWidth:"250px",maxWidth:"400px",marginRight:"1rem",maxHeight:"80vh",overflowY:"auto",border:"1px solid #ccc",padding:"0.5rem"},children:[(0,r.jsx)("h5",{children:"Dossiers"}),0===u.length?(0,r.jsx)("p",{children:"Aucun dossier cr\xe9\xe9"}):u.map(e=>(0,r.jsxs)("div",{onClick:()=>b(e.id),onDrop:t=>es(t,e.id),onDragOver:ea,style:{padding:"0.5rem",marginBottom:"0.5rem",border:x===e.id?"2px solid #0056b3":"1px solid #007bff",borderRadius:"4px",cursor:"pointer",backgroundColor:x===e.id?"#cce5ff":"transparent",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{onClick:()=>b(e.id),style:{flexGrow:1,cursor:"pointer"},children:[(0,r.jsx)("strong",{children:e.name}),(0,r.jsxs)("div",{style:{fontSize:"0.8rem",marginTop:"0.25rem"},children:[el(e.id).length," horaires"]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("button",{className:"btn btn-sm btn-outline-primary me-1",onClick:t=>{t.stopPropagation();let i=prompt("Modifier le nom du dossier:",e.name);i&&""!==i.trim()&&Z(u.map(t=>t.id===e.id?{...t,name:i.trim()}:t))},children:"Modifier"}),(0,r.jsx)("button",{className:"btn btn-sm btn-outline-danger",onClick:t=>{if(t.stopPropagation(),confirm("\xcates-vous s\xfbr de vouloir supprimer ce dossier ?")){Z(u.filter(t=>t.id!==e.id));let t={...p};Object.keys(t).forEach(i=>{t[i]===e.id&&delete t[i]}),$(t),x===e.id&&b(null)}},children:"Supprimer"})]})]},e.id)),x&&(0,r.jsx)("button",{className:"btn btn-link mt-2",onClick:()=>b(null),children:"Afficher tous les horaires"})]}),(0,r.jsxs)("div",{style:{flexGrow:1,maxHeight:"80vh",overflowY:"auto",border:"1px solid #ccc",padding:"0.5rem"},children:[(0,r.jsx)("h5",{children:"Horaires"}),(0,r.jsxs)("table",{className:"table table-striped",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Num\xe9ro du Train"}),(0,r.jsx)("th",{children:"Gare de Provenance"}),(0,r.jsx)("th",{children:"Gare de Destination"}),(0,r.jsx)("th",{children:"Heure de D\xe9part"}),(0,r.jsx)("th",{children:"Type de Train"}),(0,r.jsx)("th",{children:"Mat\xe9riel Roulant"}),(0,r.jsx)("th",{children:"Jours de Circulation"}),(0,r.jsx)("th",{children:"Dossier"}),(0,r.jsx)("th",{children:"Actions"})]})}),(0,r.jsx)("tbody",{children:0===ed.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:"9",className:"text-center",children:"Aucun horaire cr\xe9\xe9"})}):ed.map((e,t)=>{var i;return(0,r.jsxs)("tr",{draggable:!0,onDragStart:i=>{i.dataTransfer.setData("scheduleId",e.id.toString()),i.dataTransfer.setData("scheduleIndex",t.toString())},onDragOver:e=>e.preventDefault(),onDrop:e=>{e.preventDefault();let i=Number(e.dataTransfer.getData("scheduleIndex"));if(i===t)return;let r=[...N];0===r.length&&r.push(...ed.map(e=>e.id));let[n]=r.splice(i,1);r.splice(t,0,n),k(r),localStorage.setItem("scheduleOrder",JSON.stringify(r))},style:{cursor:"grab"},onClick:()=>{z(e),R(!0)},children:[(0,r.jsx)("td",{children:e.trainNumber}),(0,r.jsx)("td",{children:e.departureStation}),(0,r.jsx)("td",{children:e.arrivalStation}),(0,r.jsx)("td",{children:e.departureTime}),(0,r.jsx)("td",{children:e.trainType}),(0,r.jsx)("td",{children:(0,r.jsx)("a",{href:"/admin/compositions-trains",className:e.rollingStockFileName?"text-primary":"text-muted",children:e.rollingStockFileName?"Voir la composition":"D\xe9finir la composition"})}),(0,r.jsx)("td",{children:e.joursCirculation?e.joursCirculation.join(", "):"-"}),(0,r.jsx)("td",{children:(null==(i=u.find(t=>t.id===p[e.id]))?void 0:i.name)||"-"}),(0,r.jsxs)("td",{children:[(0,r.jsx)("button",{type:"button",className:"btn btn-sm btn-warning me-2",onClick:t=>{t.stopPropagation(),E(e),O(e.trainNumber),P(e.departureStation),M(e.arrivalStation),q(e.arrivalTime),B(e.departureTime),Y(e.trainType),V(e.servedStations&&e.servedStations.length>0?e.servedStations:[{name:"",arrivalTime:"",departureTime:""}]),X(e.joursCirculation||[]),Q(p[e.id]||null),C(!0)},children:"Modifier"}),(0,r.jsx)("button",{type:"button",className:"btn btn-sm btn-danger",onClick:t=>{t.stopPropagation(),confirm("\xcates-vous s\xfbr de vouloir supprimer cet horaire ?")&&fetch("/api/schedules/".concat(e.id),{method:"DELETE"}).then(()=>{m(d.filter(t=>t.id!==e.id)),T&&T.id===e.id&&(z(null),R(!1));let t={...p};delete t[e.id],$(t)}).catch(e=>{console.error("Error deleting schedule:",e),alert("Erreur lors de la suppression de l'horaire.")})},children:"Supprimer"})]})]},e.id)})})]})]})]}),w&&(0,r.jsx)("div",{className:"modal d-block",tabIndex:"-1",role:"dialog",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,r.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:(0,r.jsx)("div",{className:"modal-content",children:(0,r.jsxs)("form",{onSubmit:en,children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",children:A?"Modifier un horaire":"Cr\xe9er un horaire"}),(0,r.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:ei})]}),(0,r.jsxs)("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"trainNumber",className:"form-label",children:"Num\xe9ro du Train"}),(0,r.jsx)("input",{type:"text",id:"trainNumber",className:"form-control",value:D,onChange:e=>O(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"departureStation",className:"form-label",children:"Gare de Provenance"}),(0,r.jsx)("input",{type:"text",id:"departureStation",className:"form-control",value:I,onChange:e=>P(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"arrivalStation",className:"form-label",children:"Gare de Destination"}),(0,r.jsx)("input",{type:"text",id:"arrivalStation",className:"form-control",value:H,onChange:e=>M(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"arrivalTime",className:"form-label",children:"Heure d'Arriv\xe9e"}),(0,r.jsx)("input",{type:"time",id:"arrivalTime",className:"form-control",value:G,onChange:e=>q(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"departureTime",className:"form-label",children:"Heure de D\xe9part"}),(0,r.jsx)("input",{type:"time",id:"departureTime",className:"form-control",value:J,onChange:e=>B(e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"trainType",className:"form-label",children:"Type de Train"}),(0,r.jsxs)("select",{id:"trainType",className:"form-select",value:L,onChange:e=>Y(e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",children:"S\xe9lectionnez un type"}),_.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"folderSelect",className:"form-label",children:"Dossier"}),(0,r.jsxs)("select",{id:"folderSelect",className:"form-select",value:K||"",onChange:e=>Q(e.target.value?Number(e.target.value):null),children:[(0,r.jsx)("option",{value:"",children:"-- Aucun --"}),u.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Composition du Train"}),(0,r.jsx)(o.A,{trainNumber:D,composition:(null==A?void 0:A.composition)||[],visualHeight:200}),(0,r.jsx)("div",{className:"mt-2 text-center",children:(0,r.jsx)("a",{href:"/admin/compositions-trains",className:(null==A?void 0:A.composition)&&A.composition.length>0?"text-primary":"text-muted",children:(null==A?void 0:A.composition)&&A.composition.length>0?"Modifier la composition":"D\xe9finir la composition"})})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Liste des Gares Desservies"}),U.map((e,t)=>(0,r.jsxs)("div",{className:"d-flex mb-2 align-items-center",children:[(0,r.jsx)("input",{type:"text",className:"form-control me-2 flex-grow-1",placeholder:"Nom de la gare",value:e.name,onChange:e=>{let i=[...U];i[t].name=e.target.value,V(i)}}),(0,r.jsx)("input",{type:"time",className:"form-control me-2",placeholder:"Heure d'arriv\xe9e",value:e.arrivalTime,onChange:e=>{let i=[...U];i[t].arrivalTime=e.target.value,V(i)}}),(0,r.jsx)("input",{type:"time",className:"form-control me-2",placeholder:"Heure de d\xe9part",value:e.departureTime,onChange:e=>{let i=[...U];i[t].departureTime=e.target.value,V(i)}}),(0,r.jsx)("button",{type:"button",className:"btn btn-danger",onClick:()=>{V(U.filter((e,i)=>i!==t))},children:"\xd7"})]},t)),(0,r.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>V([...U,{name:"",arrivalTime:"",departureTime:""}]),children:"+"})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{className:"form-label",children:"Jours de Circulation"}),(0,r.jsx)("div",{className:"d-flex flex-wrap",children:c.map(e=>(0,r.jsxs)("div",{className:"form-check me-3",children:[(0,r.jsx)("input",{className:"form-check-input",type:"checkbox",id:"day-".concat(e.value),checked:W.includes(e.value),onChange:()=>er(e.value)}),(0,r.jsx)("label",{className:"form-check-label",htmlFor:"day-".concat(e.value),children:e.label})]},e.value))})]})]}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Enregistrer"}),(0,r.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:ei,children:"Annuler"})]})]})})})}),F&&T&&(0,r.jsx)("div",{className:"modal d-block",tabIndex:"-1",role:"dialog",style:{backgroundColor:"rgba(0,0,0,0.5)"},children:(0,r.jsx)("div",{className:"modal-dialog modal-lg",role:"document",children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-header",children:[(0,r.jsx)("h5",{className:"modal-title",children:"D\xe9tails de l'horaire"}),(0,r.jsx)("button",{type:"button",className:"btn-close","aria-label":"Close",onClick:()=>R(!1)})]}),(0,r.jsxs)("div",{className:"modal-body",style:{maxHeight:"70vh",overflowY:"auto"},children:[(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Num\xe9ro du Train:"})," ",T.trainNumber]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Gare de Provenance:"})," ",T.departureStation]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Gare de Destination:"})," ",T.arrivalStation]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Heure d'Arriv\xe9e:"})," ",T.arrivalTime]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Heure de D\xe9part:"})," ",T.departureTime]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Type de Train:"})," ",T.trainType]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("strong",{children:"Composition du Train:"}),(0,r.jsx)(o.A,{trainNumber:T.trainNumber,composition:T.composition||[],visualHeight:200}),(0,r.jsx)("div",{className:"mt-2 text-center",children:(0,r.jsx)("a",{href:"/admin/compositions-trains",className:T.composition&&T.composition.length>0?"text-primary":"text-muted",children:T.composition&&T.composition.length>0?"Modifier la composition":"D\xe9finir la composition"})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Gares Desservies:"}),T.servedStations&&T.servedStations.length>0?(0,r.jsx)("ul",{children:T.servedStations.map((e,t)=>"object"==typeof e&&null!==e?(0,r.jsxs)("li",{children:[e.name," (Arriv\xe9e: ",e.arrivalTime||"-",", D\xe9part: ",e.departureTime||"-",")"]},t):(0,r.jsx)("li",{children:e},t))}):(0,r.jsx)("p",{children:"-"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{children:"Jours de Circulation:"})," ",T.joursCirculation?T.joursCirculation.join(", "):"-"]})]}),(0,r.jsx)("div",{className:"modal-footer",children:(0,r.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>R(!1),children:"Fermer"})})]})})})]})})]})}},1536:(e,t,i)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/horaires",function(){return i(642)}])},2552:()=>{},4250:(e,t,i)=>{"use strict";e.exports=i(8817).style},7180:(e,t,i)=>{"use strict";i.d(t,{A:()=>l});var r=i(7876),n=i(4250),s=i.n(n),a=i(4232);function l(e){let{trainNumber:t,composition:i,visualHeight:n=300}=e,[l,o]=(0,a.useState)(0),[c,d]=(0,a.useState)(!0),m=(0,a.useCallback)(()=>{(null==i?void 0:i.length)>1&&o(e=>(e+1)%i.length)},[null==i?void 0:i.length]);return((0,a.useEffect)(()=>{let e;return c&&(null==i?void 0:i.length)>1&&(e=setInterval(m,3e3)),()=>{e&&clearInterval(e)}},[c,m,null==i?void 0:i.length]),i&&0!==i.length)?(0,r.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" train-visual-slider",children:[(0,r.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" train-visual-container",children:[i.length>1&&(0,r.jsx)("button",{onClick:()=>{d(!1),o(e=>0===e?i.length-1:e-1)},className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" nav-arrow prev",children:"←"}),(0,r.jsx)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" train-visual-wrapper",children:(0,r.jsx)("div",{style:{transform:"translateX(-".concat(l*(100/i.length),"%)"),width:"".concat(100*i.length,"%")},className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" train-composition",children:i.map((e,a)=>(0,r.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" train-unit",children:[(0,r.jsx)("img",{src:e.imageData,alt:"Train ".concat(t," - Unit\xe9 ").concat(a+1),onError:e=>{e.target.onerror=null,e.target.src="/images/train-placeholder.png"},className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" train-visual-image"}),(0,r.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" train-info-overlay",children:[(0,r.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" train-name",children:["Train ",t," - Unit\xe9 ",a+1]}),(0,r.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" materiel-info",children:[(0,r.jsx)("span",{className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" materiel-name",children:e.name}),(0,r.jsx)("span",{className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" materiel-type",children:e.type})]})]})]},a))})}),i.length>1&&(0,r.jsx)("button",{onClick:()=>{d(!1),m()},className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" nav-arrow next",children:"→"}),i.length>1&&(0,r.jsx)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" slider-indicators",children:i.map((e,t)=>(0,r.jsx)("button",{onClick:()=>{d(!1),o(t)},className:s().dynamic([["28eb7567fb6d119f",[n,100/i.length,100/i.length]]])+" "+"indicator ".concat(t===l?"active":"")},t))})]}),(0,r.jsx)(s(),{id:"28eb7567fb6d119f",dynamic:[n,100/i.length,100/i.length],children:".train-visual-slider.__jsx-style-dynamic-selector{position:relative;width:100%;max-width:800px;margin:0 auto;background:#fff;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;overflow:hidden}.train-visual-container.__jsx-style-dynamic-selector{position:relative;width:100%;height:".concat(n,"px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.train-visual-wrapper.__jsx-style-dynamic-selector{position:relative;width:100%;height:100%;overflow:hidden}.train-composition.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:100%;-webkit-transition:-webkit-transform.5s ease;-moz-transition:-moz-transform.5s ease;-o-transition:-o-transform.5s ease;transition:-webkit-transform.5s ease;transition:-moz-transform.5s ease;transition:-o-transform.5s ease;transition:transform.5s ease}.train-unit.__jsx-style-dynamic-selector{position:relative;-webkit-box-flex:0;-webkit-flex:0 0 ").concat(100/i.length,"%;-moz-box-flex:0;-ms-flex:0 0 ").concat(100/i.length,"%;flex:0 0 ").concat(100/i.length,"%;width:").concat(100/i.length,"%;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.train-visual-image.__jsx-style-dynamic-selector{height:80%;width:auto;max-width:90%;-o-object-fit:contain;object-fit:contain}.train-info-overlay.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,102,.8);color:white;padding:.75rem}.train-name.__jsx-style-dynamic-selector{font-weight:600;font-size:1.1rem;margin-bottom:.25rem}.materiel-info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:.9rem;opacity:.9}.nav-arrow.__jsx-style-dynamic-selector{position:absolute;top:50%;-webkit-transform:translatey(-50%);-moz-transform:translatey(-50%);-ms-transform:translatey(-50%);-o-transform:translatey(-50%);transform:translatey(-50%);z-index:2;background:none;border:none;color:black;font-size:24px;cursor:pointer;padding:10px;-webkit-transition:opacity.2s;-moz-transition:opacity.2s;-o-transition:opacity.2s;transition:opacity.2s}.nav-arrow.__jsx-style-dynamic-selector:hover{opacity:.7}.nav-arrow.prev.__jsx-style-dynamic-selector{left:0}.nav-arrow.next.__jsx-style-dynamic-selector{right:0}.slider-indicators.__jsx-style-dynamic-selector{position:absolute;bottom:60px;left:0;right:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:8px;z-index:3}.indicator.__jsx-style-dynamic-selector{width:8px;height:8px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:rgba(255,255,255,.5);border:none;padding:0;cursor:pointer;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.indicator.active.__jsx-style-dynamic-selector{background:white;-webkit-transform:scale(1.2);-moz-transform:scale(1.2);-ms-transform:scale(1.2);-o-transform:scale(1.2);transform:scale(1.2)}.train-visual-placeholder.__jsx-style-dynamic-selector{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#f8f9fa;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;color:#666}.train-visual-placeholder.__jsx-style-dynamic-selector .material-icons.__jsx-style-dynamic-selector{font-size:48px;margin-bottom:1rem;color:#006}@media(max-width:768px){.nav-button.__jsx-style-dynamic-selector{width:32px;height:32px}.train-info-overlay.__jsx-style-dynamic-selector{padding:.5rem}.train-name.__jsx-style-dynamic-selector{font-size:1rem}.materiel-info.__jsx-style-dynamic-selector{font-size:.8rem}}")})]}):(0,r.jsxs)("div",{className:"train-visual-placeholder",style:{height:n},children:[(0,r.jsx)("span",{className:"material-icons",children:"train"}),(0,r.jsxs)("p",{children:["Composition non d\xe9finie pour le train ",t]})]})}},8817:(e,t,i)=>{"use strict";var r=i(9742);i(2552);var n=i(4232),s=function(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}(n),a=void 0!==r&&r.env&&!0,l=function(e){return"[object String]"===Object.prototype.toString.call(e)},o=function(){function e(e){var t=void 0===e?{}:e,i=t.name,r=void 0===i?"stylesheet":i,n=t.optimizeForSpeed,s=void 0===n?a:n;c(l(r),"`name` must be a string"),this._name=r,this._deletedRulePlaceholder="#"+r+"-deleted-rule____{}",c("boolean"==typeof s,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=s,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var o=document.querySelector('meta[property="csp-nonce"]');this._nonce=o?o.getAttribute("content"):null}var t,i=e.prototype;return i.setOptimizeForSpeed=function(e){c("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),c(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},i.isOptimizeForSpeed=function(){return this._optimizeForSpeed},i.inject=function(){var e=this;if(c(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(a||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,i){return"number"==typeof i?e._serverSheet.cssRules[i]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),i},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},i.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},i.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},i.insertRule=function(e,t){if(c(l(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var i=this.getSheet();"number"!=typeof t&&(t=i.cssRules.length);try{i.insertRule(e,t)}catch(t){return a||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var r=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,r))}return this._rulesCount++},i.replaceRule=function(e,t){if(this._optimizeForSpeed){var i=this.getSheet();if(t.trim()||(t=this._deletedRulePlaceholder),!i.cssRules[e])return e;i.deleteRule(e);try{i.insertRule(t,e)}catch(r){a||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),i.insertRule(this._deletedRulePlaceholder,e)}}else{var r=this._tags[e];c(r,"old rule at index `"+e+"` not found"),r.textContent=t}return e},i.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];c(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},i.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},i.cssRules=function(){var e=this;return this._tags.reduce(function(t,i){return i?t=t.concat(Array.prototype.map.call(e.getSheetForTag(i).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},i.makeStyleTag=function(e,t,i){t&&c(l(t),"makeStyleTag accepts only strings as second parameter");var r=document.createElement("style");this._nonce&&r.setAttribute("nonce",this._nonce),r.type="text/css",r.setAttribute("data-"+e,""),t&&r.appendChild(document.createTextNode(t));var n=document.head||document.getElementsByTagName("head")[0];return i?n.insertBefore(r,i):n.appendChild(r),r},t=[{key:"length",get:function(){return this._rulesCount}}],function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(e.prototype,t),e}();function c(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var d=function(e){for(var t=5381,i=e.length;i;)t=33*t^e.charCodeAt(--i);return t>>>0},m={};function u(e,t){if(!t)return"jsx-"+e;var i=String(t),r=e+i;return m[r]||(m[r]="jsx-"+d(e+"-"+i)),m[r]}function h(e,t){var i=e+t;return m[i]||(m[i]=t.replace(/__jsx-style-dynamic-selector/g,e)),m[i]}var p=function(){function e(e){var t=void 0===e?{}:e,i=t.styleSheet,r=void 0===i?null:i,n=t.optimizeForSpeed,s=void 0!==n&&n;this._sheet=r||new o({name:"styled-jsx",optimizeForSpeed:s}),this._sheet.inject(),r&&"boolean"==typeof s&&(this._sheet.setOptimizeForSpeed(s),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var i=this.getIdAndRules(e),r=i.styleId,n=i.rules;if(r in this._instancesCounts){this._instancesCounts[r]+=1;return}var s=n.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[r]=s,this._instancesCounts[r]=1},t.remove=function(e){var t=this,i=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(i in this._instancesCounts,"styleId: `"+i+"` not found"),this._instancesCounts[i]-=1,this._instancesCounts[i]<1){var r=this._fromServer&&this._fromServer[i];r?(r.parentNode.removeChild(r),delete this._fromServer[i]):(this._indices[i].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[i]),delete this._instancesCounts[i]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],i=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return i[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,i;return t=this.cssRules(),void 0===(i=e)&&(i={}),t.map(function(e){var t=e[0],r=e[1];return s.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:i.nonce?i.nonce:void 0,dangerouslySetInnerHTML:{__html:r}})})},t.getIdAndRules=function(e){var t=e.children,i=e.dynamic,r=e.id;if(i){var n=u(r,i);return{styleId:n,rules:Array.isArray(t)?t.map(function(e){return h(n,e)}):[h(n,t)]}}return{styleId:u(r),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),f=n.createContext(null);f.displayName="StyleSheetContext";var x=s.default.useInsertionEffect||s.default.useLayoutEffect,b=new p;function y(e){var t=b||n.useContext(f);return t&&x(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}y.dynamic=function(e){return e.map(function(e){return u(e[0],e[1])}).join(" ")},t.style=y}},e=>{var t=t=>e(e.s=t);e.O(0,[8230,4587,3779,636,6593,8792],()=>t(1536)),_N_E=e.O()}]);