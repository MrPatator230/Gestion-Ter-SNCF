(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9787],{3257:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>h});var i=t(7876),n=t(4250),s=t.n(n),r=t(4232),l=t(4046),o=t(3040),c=t(3779),d=t(5185),m=t(2507);function b(e){let{item:a,onEdit:t,onDelete:n}=e,{primaryColor:l,buttonStyle:o}=(0,r.useContext)(m.l),[{isDragging:c},b]=(0,d.i)(()=>({type:"ROLLING_STOCK",item:{...a},collect:e=>({isDragging:e.isDragging()})})),y=()=>{switch(o){case"rounded":return"25px";case"square":return"0";default:return"4px"}};return(0,i.jsxs)("div",{ref:b,style:{opacity:c?.5:1,cursor:"move",borderRadius:y(),transition:"all 0.2s ease"},className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" card mb-3",children:[(0,i.jsx)("div",{className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" card-body p-3",children:(0,i.jsxs)("div",{className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" d-flex align-items-center justify-content-between",children:[(0,i.jsxs)("div",{className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" d-flex align-items-center",children:[a.imageData&&(0,i.jsx)("div",{style:{width:"64px",height:"64px",flexShrink:0},className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" me-3",children:(0,i.jsx)("img",{src:a.imageData,alt:a.name,style:{objectFit:"contain"},className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" w-100 h-100"})}),(0,i.jsxs)("div",{className:s().dynamic([["b8d07b41f7f43dc5",[l]]]),children:[(0,i.jsx)("h3",{style:{color:l},className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" h6 mb-1",children:a.name}),(0,i.jsx)("p",{className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" text-muted small mb-0",children:a.type})]})]}),(0,i.jsxs)("div",{className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" d-flex gap-2",children:[(0,i.jsx)("button",{onClick:t,style:{borderRadius:y()},className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" btn btn-outline-warning btn-sm",children:"Modifier"}),(0,i.jsx)("button",{onClick:n,style:{borderRadius:y()},className:s().dynamic([["b8d07b41f7f43dc5",[l]]])+" btn btn-outline-danger btn-sm",children:"Supprimer"})]})]})}),(0,i.jsx)(s(),{id:"b8d07b41f7f43dc5",dynamic:[l],children:".card.__jsx-style-dynamic-selector{border:1px solid rgba(0,0,0,.125);background-color:white}.card.__jsx-style-dynamic-selector:hover{border-color:".concat(l,";-webkit-box-shadow:0 .125rem .25rem rgba(0,0,0,.075);-moz-box-shadow:0 .125rem .25rem rgba(0,0,0,.075);box-shadow:0 .125rem .25rem rgba(0,0,0,.075);-webkit-transform:translatey(-2px);-moz-transform:translatey(-2px);-ms-transform:translatey(-2px);-o-transform:translatey(-2px);transform:translatey(-2px)}")})]})}var y=t(3845);function f(e){let{onDrop:a,composition:t}=e,{primaryColor:n,buttonStyle:l}=(0,r.useContext)(m.l),[{isOver:o},c]=(0,y.H)(()=>({accept:"ROLLING_STOCK",drop:e=>{a(e)},collect:e=>({isOver:e.isOver()})})),d=()=>{switch(l){case"rounded":return"25px";case"square":return"0";default:return"4px"}};return(0,i.jsxs)("div",{ref:c,style:{minHeight:"120px",border:"2px dashed ".concat(o?n:"#dee2e6"),borderRadius:d(),backgroundColor:o?"".concat(n,"10"):"transparent",padding:"1rem",transition:"all 0.2s ease"},className:s().dynamic([["41e0178ad49f8420",[n]]])+" drop-zone mb-4",children:[0===t.length?(0,i.jsx)("div",{className:s().dynamic([["41e0178ad49f8420",[n]]])+" d-flex align-items-center justify-content-center h-100",children:(0,i.jsxs)("div",{className:s().dynamic([["41e0178ad49f8420",[n]]])+" text-center text-muted",children:[(0,i.jsx)("p",{className:s().dynamic([["41e0178ad49f8420",[n]]])+" mb-1",children:"Glissez-d\xe9posez les \xe9l\xe9ments du mat\xe9riel roulant ici"}),(0,i.jsx)("small",{className:s().dynamic([["41e0178ad49f8420",[n]]]),children:"pour cr\xe9er la composition du train"})]})}):(0,i.jsx)("div",{className:s().dynamic([["41e0178ad49f8420",[n]]])+" d-flex align-items-center overflow-auto",children:t.map((e,r)=>(0,i.jsx)("div",{style:{width:"200px",borderRadius:d()},className:s().dynamic([["41e0178ad49f8420",[n]]])+" composition-item me-2 flex-shrink-0",children:(0,i.jsx)("div",{className:s().dynamic([["41e0178ad49f8420",[n]]])+" card h-100",children:(0,i.jsx)("div",{className:s().dynamic([["41e0178ad49f8420",[n]]])+" card-body p-2",children:(0,i.jsxs)("div",{className:s().dynamic([["41e0178ad49f8420",[n]]])+" d-flex flex-column align-items-center",children:[e.imageData&&(0,i.jsx)("div",{style:{width:"80px",height:"40px",flexShrink:0},className:s().dynamic([["41e0178ad49f8420",[n]]])+" mb-2",children:(0,i.jsx)("img",{src:e.imageData,alt:e.name,style:{objectFit:"contain"},className:s().dynamic([["41e0178ad49f8420",[n]]])+" w-100 h-100"})}),(0,i.jsxs)("div",{className:s().dynamic([["41e0178ad49f8420",[n]]])+" text-center",children:[(0,i.jsx)("h4",{style:{color:n,fontSize:"0.8rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"180px"},className:s().dynamic([["41e0178ad49f8420",[n]]])+" h6 mb-1",children:e.name}),(0,i.jsx)("p",{style:{fontSize:"0.7rem"},className:s().dynamic([["41e0178ad49f8420",[n]]])+" text-muted small mb-1",children:e.type}),(0,i.jsx)("button",{onClick:()=>{let e=[...t];e.splice(r,1),a(e)},style:{minWidth:"20px",fontSize:"0.8rem"},className:s().dynamic([["41e0178ad49f8420",[n]]])+" btn btn-link text-danger p-0",children:(0,i.jsx)("span",{style:{fontSize:"16px"},className:s().dynamic([["41e0178ad49f8420",[n]]])+" material-icons",children:"delete"})})]})]})})})},"".concat(e.id,"-").concat(r)))}),(0,i.jsx)(s(),{id:"41e0178ad49f8420",dynamic:[n],children:".drop-zone.__jsx-style-dynamic-selector{-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.card.__jsx-style-dynamic-selector{border:1px solid rgba(0,0,0,.125);background-color:white;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.card.__jsx-style-dynamic-selector:hover{border-color:".concat(n,";-webkit-box-shadow:0 .125rem .25rem rgba(0,0,0,.075);-moz-box-shadow:0 .125rem .25rem rgba(0,0,0,.075);box-shadow:0 .125rem .25rem rgba(0,0,0,.075)}.btn-link.__jsx-style-dynamic-selector{text-decoration:none}.btn-link.__jsx-style-dynamic-selector:hover{opacity:.8}.material-icons.__jsx-style-dynamic-selector{line-height:1}")})]})}var x=t(7180);function h(){let{primaryColor:e,buttonStyle:a}=(0,r.useContext)(m.l),[t,n]=(0,r.useState)([]),[d,y]=(0,r.useState)(null),[h,u]=(0,r.useState)([]),[p,g]=(0,r.useState)([]),[j,v]=(0,r.useState)(""),[w,N]=(0,r.useState)(""),[_,k]=(0,r.useState)(""),[z,C]=(0,r.useState)(null),[S,E]=(0,r.useState)(""),[R,T]=(0,r.useState)(""),[D,A]=(0,r.useState)(null),[O,L]=(0,r.useState)(!1);async function F(){try{let e=await fetch("/api/materiels-roulants");if(e.ok){let a=await e.json();u(a)}}catch(e){console.error("Error loading materiels roulants:",e)}}(0,r.useEffect)(()=>{!async function(){try{let e=await fetch("/api/schedules");if(e.ok){let a=await e.json();n(a)}}catch(e){console.error("Error loading schedules:",e)}F()}()},[]);let I=async e=>{e.preventDefault();try{let e=await fetch("/api/schedules/by-train-number?trainNumber=".concat(encodeURIComponent(w)));if(!e.ok){k("Num\xe9ro de train non trouv\xe9"),y(null),g([]),L(!1);return}let a=await e.json();y(a),g((null==a?void 0:a.composition)||[]),k(""),L(!1)}catch(e){console.error("Error fetching schedule by train number:",e),k("Erreur lors de la recherche du num\xe9ro de train"),y(null),g([]),L(!1)}},U=async()=>{if(!d)return void alert("Veuillez s\xe9lectionner un horaire");try{if(!d.train_number||!d.departure_station||!d.arrival_station||!d.arrival_time||!d.departure_time||!d.train_type)return void alert("Les informations de l'horaire sont incompl\xe8tes. Veuillez v\xe9rifier les donn\xe9es.");let e={trainNumber:d.train_number,departureStation:d.departure_station,arrivalStation:d.arrival_station,arrivalTime:d.arrival_time,departureTime:d.departure_time,trainType:d.train_type,rollingStockFileName:p.length>0?p[0].name:null,composition:p,joursCirculation:d.jours_circulation||[],servedStations:d.served_stations||[]},a=await fetch("/api/schedules/".concat(d.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!a.ok){let e=await a.json();alert("Erreur lors de la mise \xe0 jour de la composition: ".concat(e.error));return}let i=await fetch("/api/schedules/by-train-number?trainNumber=".concat(encodeURIComponent(d.train_number))),s=await i.json(),r=t.map(e=>e.id===s.id?s:e);n(r),y(s),L(!0),alert("Composition enregistr\xe9e avec succ\xe8s")}catch(e){console.error("Error saving composition:",e),alert("Erreur lors de l'enregistrement de la composition")}},P=async e=>{if(e.preventDefault(),!S.trim()||!R.trim())return void alert("Veuillez remplir le nom et le type.");if(null===z&&!D)return void alert("Veuillez ajouter une image pour un nouveau mat\xe9riel.");let a=async a=>{let t={name:S.trim(),type:R.trim(),imageData:a};try{let a=await fetch(z?"/api/materiels-roulants/".concat(z):"/api/materiels-roulants",{method:z?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to save rolling stock")}await F(),C(null),E(""),T(""),A(null),e.target.reset()}catch(e){console.error(e),alert("Error saving rolling stock: ".concat(e.message))}};if(D){let e=new FileReader;e.onloadend=()=>{a(e.result)},e.readAsDataURL(D)}else a(null)},V=e=>{C(e.id),E(e.name),T(e.type),A(null)},G=async e=>{if(confirm("\xcates-vous s\xfbr de vouloir supprimer ce mat\xe9riel roulant ?"))try{let a=await fetch("/api/materiels-roulants/".concat(e),{method:"DELETE"});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to delete rolling stock")}await F(),z===e&&(C(null),E(""),T(""),A(null))}catch(e){console.error(e),alert("Error deleting rolling stock: ".concat(e.message))}},q=()=>{switch(a){case"rounded":return"25px";case"square":return"0";default:return"4px"}};return(0,i.jsxs)(l.Q,{backend:o.t2,children:[(0,i.jsxs)("div",{id:"wrapper",style:{display:"flex",minHeight:"100vh"},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]]),children:[(0,i.jsx)(c.A,{}),(0,i.jsx)("div",{id:"content-wrapper",className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" d-flex flex-column flex-grow-1",children:(0,i.jsxs)("div",{id:"content",className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" container-fluid py-4",children:[(0,i.jsx)("h1",{style:{color:e},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" h3 mb-4",children:"Compositions des Trains"}),(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" row",children:[(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" col-lg-8",children:[(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" card shadow-sm mb-4",children:(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" card-body",children:(0,i.jsxs)("form",{onSubmit:I,className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" row g-3 align-items-end",children:[(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" col-md-8",children:[(0,i.jsx)("label",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" form-label",children:"Num\xe9ro du train"}),(0,i.jsx)("input",{type:"text",value:w,onChange:e=>N(e.target.value),placeholder:"Entrez le num\xe9ro du train",style:{borderRadius:q()},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" "+"form-control ".concat(_?"is-invalid":"")}),_&&(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" invalid-feedback",children:_})]}),(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" col-md-4",children:(0,i.jsx)("button",{type:"submit",style:{backgroundColor:e,color:"white",borderRadius:q()},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" btn w-100",children:"Rechercher"})})]})})}),d&&(0,i.jsxs)(i.Fragment,{children:[O&&(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" card shadow-sm mb-4",children:(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" card-body",children:[(0,i.jsxs)("h2",{style:{color:e},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" h5 mb-4",children:["Visualisation du Train ",d.train_number]}),(0,i.jsx)(x.A,{trainNumber:d.train_number,composition:p})]})}),(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" card shadow-sm mb-4",children:(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" card-body",children:[(0,i.jsxs)("h2",{style:{color:e},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" h5 mb-4",children:["Composition du Train ",d.train_number]}),(0,i.jsx)(f,{onDrop:e=>{Array.isArray(e)?g(e):g(a=>[...a,e]),L(!1)},composition:p}),(0,i.jsx)("button",{onClick:U,style:{backgroundColor:e,color:"white",borderRadius:q()},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" btn w-100 mt-3",children:"Enregistrer la Composition"})]})})]}),(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" card shadow-sm mb-4",children:(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" card-body",children:[(0,i.jsx)("h2",{style:{color:e},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" h5 mb-4",children:"Gestion du Mat\xe9riel Roulant"}),(0,i.jsxs)("form",{onSubmit:P,className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" mb-4",children:[(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" row g-3",children:[(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" col-md-6",children:[(0,i.jsx)("label",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" form-label",children:"Nom"}),(0,i.jsx)("input",{type:"text",value:S,onChange:e=>E(e.target.value),placeholder:"Nom du mat\xe9riel",style:{borderRadius:q()},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" form-control"})]}),(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" col-md-6",children:[(0,i.jsx)("label",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" form-label",children:"Type"}),(0,i.jsx)("input",{type:"text",value:R,onChange:e=>T(e.target.value),placeholder:"Type (ex: Automotrice)",style:{borderRadius:q()},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" form-control"})]}),(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" col-12",children:[(0,i.jsx)("label",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" form-label",children:"Image"}),(0,i.jsx)("input",{type:"file",onChange:e=>{A(e.target.files[0])},style:{borderRadius:q()},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" form-control"})]})]}),(0,i.jsx)("button",{type:"submit",style:{backgroundColor:e,color:"white",borderRadius:q()},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" btn mt-3",children:z?"Mettre \xe0 jour":"Ajouter"}),z&&(0,i.jsx)("button",{type:"button",onClick:()=>{C(null),E(""),T(""),A(null)},style:{borderRadius:q()},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" btn btn-secondary mt-3 ms-2",children:"Annuler"})]}),(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" mb-3",children:(0,i.jsx)("input",{type:"text",placeholder:"Rechercher un mat\xe9riel roulant...",value:j,onChange:e=>v(e.target.value),style:{borderRadius:q()},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" form-control"})}),(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" row g-3",children:h.filter(e=>{var a,t;return(null==(a=e.name)?void 0:a.toLowerCase().includes(j.toLowerCase()))||(null==(t=e.type)?void 0:t.toLowerCase().includes(j.toLowerCase()))}).map(a=>(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" col-md-6",children:(0,i.jsx)(b,{item:{...a,imageData:a.image_data},onEdit:()=>V(a),onDelete:()=>G(a.id)})},a.id))})]})})]}),(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" col-lg-4",children:d&&(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" card shadow-sm",children:(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" card-body",children:[(0,i.jsx)("h2",{style:{color:e},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" h5 mb-4",children:"Arr\xeats desservis"}),(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" timeline",children:d?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" timeline-item",children:(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" timeline-content",children:[(0,i.jsx)("strong",{style:{color:e},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]]),children:d.departure_station}),(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]]),children:["D\xe9part: ",d.departure_time]})]})}),d.served_stations&&d.served_stations.length>0?d.served_stations.map((a,t)=>(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" timeline-item",children:(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" timeline-content",children:[(0,i.jsx)("strong",{style:{color:e},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]]),children:a.name}),(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]]),children:["D\xe9part: ",a.departureTime||"-"]})]})},t)):null,(0,i.jsx)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" timeline-item",children:(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]])+" timeline-content",children:[(0,i.jsx)("strong",{style:{color:e},className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]]),children:d.arrival_station}),(0,i.jsxs)("div",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]]),children:["Arriv\xe9e: ",d.arrival_time]})]})})]}):(0,i.jsx)("p",{className:s().dynamic([["b7a2e8f2e3a93b04",[e,e,e,e]]]),children:"Aucune gare desservie disponible."})})]})})})]})]})})]}),(0,i.jsx)(s(),{id:"b7a2e8f2e3a93b04",dynamic:[e,e,e,e],children:'.timeline-item.__jsx-style-dynamic-selector{position:relative;padding-left:20px;margin-bottom:1rem}.timeline-item.__jsx-style-dynamic-selector:before{content:"";position:absolute;left:0;top:0;bottom:0;width:2px;background-color:'.concat(e,'}.timeline-item.__jsx-style-dynamic-selector:after{content:"";position:absolute;left:-4px;top:8px;width:10px;height:10px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background-color:').concat(e,"}.form-control.__jsx-style-dynamic-selector:focus{border-color:").concat(e,";-webkit-box-shadow:0 0 0 .25rem ").concat(e,"40;-moz-box-shadow:0 0 0 .25rem ").concat(e,"40;box-shadow:0 0 0 .25rem ").concat(e,"40}")})]})}},7180:(e,a,t)=>{"use strict";t.d(a,{A:()=>l});var i=t(7876),n=t(4250),s=t.n(n),r=t(4232);function l(e){let{trainNumber:a,composition:t,visualHeight:n=300}=e,[l,o]=(0,r.useState)(0),[c,d]=(0,r.useState)(!0),m=(0,r.useCallback)(()=>{(null==t?void 0:t.length)>1&&o(e=>(e+1)%t.length)},[null==t?void 0:t.length]);return((0,r.useEffect)(()=>{let e;return c&&(null==t?void 0:t.length)>1&&(e=setInterval(m,3e3)),()=>{e&&clearInterval(e)}},[c,m,null==t?void 0:t.length]),t&&0!==t.length)?(0,i.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" train-visual-slider",children:[(0,i.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" train-visual-container",children:[t.length>1&&(0,i.jsx)("button",{onClick:()=>{d(!1),o(e=>0===e?t.length-1:e-1)},className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" nav-arrow prev",children:"←"}),(0,i.jsx)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" train-visual-wrapper",children:(0,i.jsx)("div",{style:{transform:"translateX(-".concat(l*(100/t.length),"%)"),width:"".concat(100*t.length,"%")},className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" train-composition",children:t.map((e,r)=>(0,i.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" train-unit",children:[(0,i.jsx)("img",{src:e.imageData,alt:"Train ".concat(a," - Unit\xe9 ").concat(r+1),onError:e=>{e.target.onerror=null,e.target.src="/images/train-placeholder.png"},className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" train-visual-image"}),(0,i.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" train-info-overlay",children:[(0,i.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" train-name",children:["Train ",a," - Unit\xe9 ",r+1]}),(0,i.jsxs)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" materiel-info",children:[(0,i.jsx)("span",{className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" materiel-name",children:e.name}),(0,i.jsx)("span",{className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" materiel-type",children:e.type})]})]})]},r))})}),t.length>1&&(0,i.jsx)("button",{onClick:()=>{d(!1),m()},className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" nav-arrow next",children:"→"}),t.length>1&&(0,i.jsx)("div",{className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" slider-indicators",children:t.map((e,a)=>(0,i.jsx)("button",{onClick:()=>{d(!1),o(a)},className:s().dynamic([["28eb7567fb6d119f",[n,100/t.length,100/t.length]]])+" "+"indicator ".concat(a===l?"active":"")},a))})]}),(0,i.jsx)(s(),{id:"28eb7567fb6d119f",dynamic:[n,100/t.length,100/t.length],children:".train-visual-slider.__jsx-style-dynamic-selector{position:relative;width:100%;max-width:800px;margin:0 auto;background:#fff;-webkit-border-radius:10px;-moz-border-radius:10px;border-radius:10px;overflow:hidden}.train-visual-container.__jsx-style-dynamic-selector{position:relative;width:100%;height:".concat(n,"px;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.train-visual-wrapper.__jsx-style-dynamic-selector{position:relative;width:100%;height:100%;overflow:hidden}.train-composition.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;height:100%;-webkit-transition:-webkit-transform.5s ease;-moz-transition:-moz-transform.5s ease;-o-transition:-o-transform.5s ease;transition:-webkit-transform.5s ease;transition:-moz-transform.5s ease;transition:-o-transform.5s ease;transition:transform.5s ease}.train-unit.__jsx-style-dynamic-selector{position:relative;-webkit-box-flex:0;-webkit-flex:0 0 ").concat(100/t.length,"%;-moz-box-flex:0;-ms-flex:0 0 ").concat(100/t.length,"%;flex:0 0 ").concat(100/t.length,"%;width:").concat(100/t.length,"%;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center}.train-visual-image.__jsx-style-dynamic-selector{height:80%;width:auto;max-width:90%;-o-object-fit:contain;object-fit:contain}.train-info-overlay.__jsx-style-dynamic-selector{position:absolute;bottom:0;left:0;right:0;background:rgba(0,0,102,.8);color:white;padding:.75rem}.train-name.__jsx-style-dynamic-selector{font-weight:600;font-size:1.1rem;margin-bottom:.25rem}.materiel-info.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-size:.9rem;opacity:.9}.nav-arrow.__jsx-style-dynamic-selector{position:absolute;top:50%;-webkit-transform:translatey(-50%);-moz-transform:translatey(-50%);-ms-transform:translatey(-50%);-o-transform:translatey(-50%);transform:translatey(-50%);z-index:2;background:none;border:none;color:black;font-size:24px;cursor:pointer;padding:10px;-webkit-transition:opacity.2s;-moz-transition:opacity.2s;-o-transition:opacity.2s;transition:opacity.2s}.nav-arrow.__jsx-style-dynamic-selector:hover{opacity:.7}.nav-arrow.prev.__jsx-style-dynamic-selector{left:0}.nav-arrow.next.__jsx-style-dynamic-selector{right:0}.slider-indicators.__jsx-style-dynamic-selector{position:absolute;bottom:60px;left:0;right:0;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;gap:8px;z-index:3}.indicator.__jsx-style-dynamic-selector{width:8px;height:8px;-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;background:rgba(255,255,255,.5);border:none;padding:0;cursor:pointer;-webkit-transition:all.2s ease;-moz-transition:all.2s ease;-o-transition:all.2s ease;transition:all.2s ease}.indicator.active.__jsx-style-dynamic-selector{background:white;-webkit-transform:scale(1.2);-moz-transform:scale(1.2);-ms-transform:scale(1.2);-o-transform:scale(1.2);transform:scale(1.2)}.train-visual-placeholder.__jsx-style-dynamic-selector{width:100%;height:100%;display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;background:#f8f9fa;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px;color:#666}.train-visual-placeholder.__jsx-style-dynamic-selector .material-icons.__jsx-style-dynamic-selector{font-size:48px;margin-bottom:1rem;color:#006}@media(max-width:768px){.nav-button.__jsx-style-dynamic-selector{width:32px;height:32px}.train-info-overlay.__jsx-style-dynamic-selector{padding:.5rem}.train-name.__jsx-style-dynamic-selector{font-size:1rem}.materiel-info.__jsx-style-dynamic-selector{font-size:.8rem}}")})]}):(0,i.jsxs)("div",{className:"train-visual-placeholder",style:{height:n},children:[(0,i.jsx)("span",{className:"material-icons",children:"train"}),(0,i.jsxs)("p",{children:["Composition non d\xe9finie pour le train ",a]})]})}},9914:(e,a,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/compositions-trains",function(){return t(3257)}])}},e=>{var a=a=>e(e.s=a);e.O(0,[8230,4587,7006,3779,636,6593,8792],()=>a(9914)),_N_E=e.O()}]);